
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	ВидПоказателей = Параметры.ВидПоказателей;
	
	Элементы.ГруппаМеждународный.Доступность = Истина;
	Элементы.ГруппаРегламентированный.Доступность = Истина;
	
	#Область ПодписиРегламентированныйУчет
	
	НастройкиРеглУчета = РеглУчетСервер.НастройкиУчета();
	ВестиУУ = НастройкиРеглУчета.ДополнительноВедетсяУправленческийУчет;
	ВестиФО = НастройкиРеглУчета.ДополнительноВедетсяУчетВВалютеФинОтчетности;
	Если ВестиУУ И ВестиФО Тогда
		Элементы.ПояснениеРегламентированный.Заголовок =
			НСтр("ru='Использовать показатели только бухгалтерского плана счетов.
|В качестве данных для показателей могут использоваться данные бухгалтерского или управленческого учета.
|Выбор типа данных происходит при формировании отчета.'
|;uk='Використовувати показники тільки бухгалтерського плану рахунків. 
|В якості даних для показників можуть використовуватися дані бухгалтерського або управлінського обліку. 
|Вибір типу даних відбувається при формуванні звіту.'");
	ИначеЕсли ВестиУУ И НЕ ВестиФО Тогда
		Элементы.ПояснениеРегламентированный.Заголовок =
			НСтр("ru='Использовать показатели только бухгалтерского плана счетов.
|В качестве данных для показателей могут использоваться данные бухгалтерского или управленческого учета или в валюте финансовой отчетности.
|Выбор типа данных происходит при формировании отчета.'
|;uk='Використовувати показники тільки бухгалтерського плану рахунків. 
|В якості даних для показників можуть використовуватися дані бухгалтерського або управлінського обліку або у валюті фінансової звітності. 
|Вибір типу даних відбувається при формуванні звіту.'");
	ИначеЕсли НЕ ВестиУУ И ВестиФО Тогда
		Элементы.ПояснениеРегламентированный.Заголовок =
			НСтр("ru='Использовать показатели только бухгалтерского плана счетов.
|В качестве данных для показателей могут использоваться данные бухгалтерского учета или в валюте финансовой отчетности.
|Выбор типа данных происходит при формировании отчета.'
|;uk='Використовувати показники тільки бухгалтерського плану рахунків. 
|В якості даних для показників можуть використовуватися дані бухгалтерського обліку або у валюті фінансової звітності. 
|Вибір типу даних відбувається при формуванні звіту.'");
	ИначеЕсли НЕ ВестиУУ И НЕ ВестиФО Тогда
		Элементы.ПояснениеРегламентированный.Заголовок =
			НСтр("ru='Использовать показатели только бухгалтерского плана счетов.';uk='Використовувати показники тільки бухгалтерського плану рахунків.'");
	КонецЕсли;
	#КонецОбласти

	#Область ПодписиМеждународныйИРегламентированныйРежим
	ВалютаРегл = Константы.ВалютаРегламентированногоУчета.Получить();
	ВалютаМУ = МеждународнаяОтчетностьВызовСервера.УчетнаяВалюта();
	ВалютаОК = ВалютаРегл = ВалютаМУ.Функциональная ИЛИ ВалютаРегл = ВалютаМУ.Представления;
	Если ВалютаРегл = ВалютаМУ.Функциональная Тогда
		Элементы.ПояснениеСмешанный.Заголовок =
			НСтр("ru='Использовать показатели международного и бухгалтерского планов счетов совместно.
|Отчет формируется в функциональной валюте для международного плана счетов
|и валюте регламентированного учета для бухгалтерского плана счетов.'
|;uk='Використовувати показники міжнародного і бухгалтерського планів рахунків спільно. 
|Звіт формується в функціональній валюті для міжнародного плану рахунків 
|і валюті регламентованого обліку для бухгалтерського плану рахунків.'");
	ИначеЕсли ВалютаРегл = ВалютаМУ.Представления Тогда
		Элементы.ПояснениеСмешанный.Заголовок =
			НСтр("ru='Использовать показатели международного и бухгалтерского планов счетов совместно.
|Отчет формируется в валюте представления для международного плана счетов
|и валюте регламентированного учета для бухгалтерского плана счетов.'
|;uk='Використовувати показники міжнародного і бухгалтерського планів рахунків спільно. 
|Звіт формується у валюті подання для міжнародного плану рахунків 
|і валюті регламентованого обліку для бухгалтерського плану рахунків.'");
	Иначе//Если НЕ ВалютаОК Тогда
		Элементы.ПояснениеСмешанный.Заголовок =
			НСтр("ru='Использовать показатели международного и бухгалтерского планов счетов совместно.
|Совместное использование показателей возможно при совпадении валюты регламентированного учета
|и одной из валют международного учета (функциональной валюты или валюты представления).'
|;uk='Використовувати показники міжнародного і бухгалтерського планів рахунків спільно. 
|Спільне використання показників можливо при співпадінні валюти регламентованого обліку 
|і однієї з валют міжнародного обліку (функціональної валюти або валюти подання).'");
		Шаблон = НСтр("ru='Валюта регл. учета %1; Функциональная валюта %2; Валюта представления %3.
|Совместное использование показателей недоступно.'
|;uk='Валюта регл. обліку %1; Функціональна валюта %2; Валюта подання %3.
|Спільне використання показників недоступне.'");
		Элементы.ПояснениеПочему.Заголовок = СтрШаблон(Шаблон, ВалютаРегл, ВалютаМУ.Функциональная,  ВалютаМУ.Представления);
		Элементы.ГруппаСмешанный.Доступность = Ложь;
	КонецЕсли;
	#КонецОбласти
	
	Текст = ?(ПустаяСтрока(Элементы.ПояснениеПочему.Заголовок),"",Элементы.ПояснениеПочему.Заголовок + Символы.ПС);
	Если (Параметры.ЕстьПоказателиМУ ИЛИ Параметры.ЕстьИзмеренияМУ) 
			И (Параметры.ЕстьПоказателиБУ ИЛИ Параметры.ЕстьИзмеренияБУ) Тогда
		Элементы.ГруппаМеждународный.Доступность = Ложь;
		Элементы.ГруппаРегламентированный.Доступность = Ложь;
		Текст = Текст + НСтр("ru='Текущий отчет содержит показатели (измерения) международного и регламентированного плана счетов.
|Использование показателей только одного вида недоступно.'
|;uk='Поточний звіт містить показники (виміри) міжнародного та регламентованого плану рахунків.
|Використання показників тільки одного виду недоступно.'");
		
	ИначеЕсли Параметры.ЕстьПоказателиМУ ИЛИ Параметры.ЕстьИзмеренияМУ Тогда
		Текст = Текст + НСтр("ru='Текущий отчет содержит показатели только международного плана счетов.';uk='Поточний звіт містить показники тільки міжнародного плану рахунків.'");
		Элементы.ГруппаРегламентированный.Доступность = Ложь;
		
	ИначеЕсли Параметры.ЕстьПоказателиБУ ИЛИ Параметры.ЕстьИзмеренияБУ Тогда
		Текст = Текст + НСтр("ru='Текущий отчет содержит показатели только регламентированного плана счетов.';uk='Поточний звіт містить показники тільки регламентованого плану рахунків.'");
		Элементы.ГруппаМеждународный.Доступность = Ложь;
		
	ИначеЕсли ВалютаОК Тогда
		Элементы.ГруппаКомментарийПочему.Видимость = Ложь;
		
	КонецЕсли;
	
	Элементы.ГруппаСмешанный.Доступность = НЕ (Параметры.ЕстьИзмеренияБУ ИЛИ Параметры.ЕстьИзмеренияМУ);
	
	Элементы.ПояснениеПочему.Заголовок = Текст;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ВыбратьВидПоказателей(Команда)
	
	Закрыть(ВидПоказателей);
	
КонецПроцедуры

#КонецОбласти
