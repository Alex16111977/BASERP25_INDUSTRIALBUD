//// Строки, хранят реквизиты имеющие смысл только для бухгалтерского и налогового учетов
//// соответственно в случае если документ не отражается в каком-то виде учета,
//// делаются невидимыми.
//Перем мСтрокаРеквизитыБухУчета Экспорт; // (Регл)
//Перем мСтрокаРеквизитыНалУчета Экспорт; // (Регл)
//Перем мСтрокаРеквизитыУпрУчета Экспорт; // (Упр)

//Перем мСчет Экспорт;
//Перем мНалоговоеНазначение Экспорт;
//Перем мНалоговоеНазначениеДоходовИЗатрат Экспорт;

//Перем мСтруктураШапкиДокумента;         // (Общ) Результат запроса по шапке документа

//Перем мВалютаРегламентированногоУчета Экспорт;

//////////////////////////////////////////////////////////////////////////////////
//// ЭКСПОРТНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ ДОКУМЕНТА

//// Процедура заполняет список реквизитов, зависимых от типов учета 
////
//Процедура ЗаполнитьСписокРеквизитовЗависимыхОтТиповУчета() Экспорт

//	мСтрокаРеквизитыБухУчета = "СчетУчетаРасчетовСКонтрагентом, НадписьСчетУчетаРасчетовСКонтрагентом,
//								|СчетУчетаРасчетовПоАвансам, НадписьСчетУчетаРасчетовПоАвансам,
//								|СчетЗатрат, Услуги.СчетДоходовБУ, Услуги.СчетРасходовБУ,
//								|Услуги.СубконтоБУ";

//КонецПроцедуры // ЗаполнитьСписокРеквизитовЗависимыхОтТиповУчета()

//// Функция проверяет правильность заполнения реквизитов документа
//// Также формирует запрос по шапке документа, результат которого
//// сохраняется в переменной мСтруктураШапкиДокумента
////
//Процедура ПроверкаРеквизитов(Отказ, Заголовок) Экспорт

//	// Сформируем структуру реквизитов шапки документа
//	СтруктураШапкиДокумента = ОбщегоНазначения.СформироватьСтруктуруШапкиДокумента(ЭтотОбъект);

//	// Документ должен принадлежать хотя бы к одному виду учета (управленческий, бухгалтерский, налоговый)
//	ОбщегоНазначения.ПроверитьПринадлежностьКВидамУчета(СтруктураШапкиДокумента, Отказ, Заголовок);
//	
//	РеквизитыШапки = "Организация, Контрагент, ДоговорКонтрагента, ВалютаДокумента, КурсВзаиморасчетов, КратностьВзаиморасчетов, СубконтоСтатьяДоходов,
//					 |ПодразделениеОрганизации, СчетУчетаРасчетовСКонтрагентом,СчетЗатрат, НоменклатурнаяГруппа";//, СчетУчетаРасчетовПоАвансам

//	ЗаполнитьСписокРеквизитовЗависимыхОтТиповУчета();
//	УправлениеПроизводством.НепроверятьРеквизитыПоТипуУчета(ЭтотОбъект, РеквизитыШапки, "", мСтрокаРеквизитыБухУчета, "");

//	// Заполним по шапке документа дерево параметров, нужных при проведении.
//	ДеревоПолейЗапросаПоШапке = ОбщегоНазначения.СформироватьДеревоПолейЗапросаПоШапке();
//	ОбщегоНазначения.ДобавитьСтрокуВДеревоПолейЗапросаПоШапке(ДеревоПолейЗапросаПоШапке, "ДоговорыКонтрагентов", "Организация", "ДоговорОрганизация");

//	// Сформируем запрос на дополнительные параметры, нужные при проведении, по данным шапки документа
//	мСтруктураШапкиДокумента = УправлениеЗапасами.СформироватьЗапросПоДеревуПолей(ЭтотОбъект, ДеревоПолейЗапросаПоШапке, Новый Структура(РеквизитыШапки), мВалютаРегламентированногоУчета);

//	РеквизитыШапки = Новый Структура(РеквизитыШапки);
//	// Сделка должна быть заполнена, если учет взаиморасчетов ведется по заказам.

//	ЗаполнениеДокументов.ПроверитьЗаполнениеШапкиДокумента(ЭтотОбъект, РеквизитыШапки, Отказ, Заголовок);

//	//Организация в документе должна совпадать с организацией, указанной в договоре взаиморасчетов.
//	УправлениеВзаиморасчетами.ПроверитьСоответствиеОрганизацииДоговоруВзаиморасчетов(Организация, ДоговорКонтрагента, мСтруктураШапкиДокумента.ДоговорОрганизация, Отказ, Заголовок);

//	РеквизитыУсл = "Номенклатура, Количество, Сумма";
//	Если УчитыватьНДС Тогда
//		РеквизитыУсл = РеквизитыУсл + ", СтавкаНДС";
//	КонецЕсли;

//	ЗаполнениеДокументов.ПроверитьЗаполнениеТабличнойЧасти(ЭтотОбъект, "Услуги", Новый Структура(РеквизитыУсл), Отказ, Заголовок);
//	
//	РеквизитыСубРабот = "Номенклатура, Контрагент, ДоговорКонтрагента, Сумма";
//	Если УчитыватьНДС Тогда
//		РеквизитыСубРабот = РеквизитыСубРабот + ", СтавкаНДС";
//	КонецЕсли;

//КонецПроцедуры // ПроверкаРеквизитов()

//// Процедура заполняет счета БУ в строке услуг
////
//Процедура ЗаполнитьСчетаБУВСтрокеУслуг(СтрокаТЧ, СчетаУчета, ЗаполнятьБУ, МетаданныеДокумента)

//	МетаданныеДокумента = Метаданные();
//	ИмяТабЧасти = ОбщегоНазначения.ПолучитьИмяТабличнойЧастиПоСсылкеНаСтроку(СтрокаТЧ);

//	Если ЗаполнятьБУ = Истина Тогда

//		СтрокаТЧ.СчетДоходовБУ  = СчетаУчета.СчетУчетаБУ;
//		
//		Если СтрокаТЧ.СчетДоходовБУ.ВидыСубконто.Количество() > 0 Тогда
//			СтрокаТЧ.СубконтоБУ = Новый(СтрокаТЧ.СчетДоходовБУ.ВидыСубконто[0].ВидСубконто.ТипЗначения.Типы()[0]);
//			Если ТипЗнч(СтрокаТЧ.СубконтоБУ) = Тип("СправочникСсылка.НоменклатурныеГруппы") Тогда
//				СтрокаТЧ.СубконтоБУ = СтрокаТЧ.Номенклатура.НоменклатурнаяГруппа;
//			КонецЕсли;
//		Иначе
//			СтрокаТЧ.СубконтоБУ = Неопределено;
//		КонецЕсли;
//		
//		//СтрокаТЧ.НалоговоеНазначение = СчетаУчета.НалоговоеНазначение;  		
//		//Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("НалоговоеНазначениеДоходовИЗатрат", МетаданныеДокумента, ИмяТабЧасти) Тогда
//		//	СтрокаТЧ.НалоговоеНазначение = СчетаУчета.НалоговоеНазначениеДоходовИЗатрат;
//		//КонецЕсли;

//	ИначеЕсли ЗаполнятьБУ = Ложь Тогда

//		СтрокаТЧ.СчетДоходовБУ  = ПланыСчетов.Хозрасчетный.ПустаяСсылка();
//		СтрокаТЧ.СчетРасходовБУ = ПланыСчетов.Хозрасчетный.ПустаяСсылка();
//		СтрокаТЧ.СубконтоБУ     = Неопределено;
//		
//		СтрокаТЧ.НалоговоеНазначение = Справочники.НалоговыеНазначенияАктивовИЗатрат.ПустаяСсылка();
//		Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("НалоговоеНазначениеДоходовИЗатрат", МетаданныеДокумента, ИмяТабЧасти) Тогда
//			СтрокаТЧ.НалоговоеНазначение = Справочники.НалоговыеНазначенияАктивовИЗатрат.ПустаяСсылка();
//		КонецЕсли;

//		
//	КонецЕсли;

//КонецПроцедуры // ЗаполнитьСчетаБУВСтрокеУслуг

//// Процедура заполняет счета учета в строке табличной части услуги
////
//Процедура ЗаполнитьСчетаУчетаВСтрокеТабЧастиУслуги(СтрокаТЧ, ЗаполнятьБУ, ЗаполнятьНУ) Экспорт

//	СчетаУчета     = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Организация, СтрокаТЧ.Номенклатура);
//	МетаданныеДока = Метаданные();

//	ЗаполнитьСчетаБУВСтрокеУслуг(СтрокаТЧ, СчетаУчета, ЗаполнятьБУ, МетаданныеДока);
//	
//КонецПроцедуры // ЗаполнитьСчетаУчетаВСтрокеТабЧастиУслуги()

//// Процедура заполняет счета учета в табличной части услуги
////
//Процедура ЗаполнитьСчетаУчетаВТабЧастиУслуги(ЗаполнятьБУ, ЗаполнятьНУ) Экспорт

//	Для каждого СтрокаТЧ Из Услуги Цикл
//		ЗаполнитьСчетаУчетаВСтрокеТабЧастиУслуги(СтрокаТЧ, ЗаполнятьБУ, ЗаполнятьНУ)
//	КонецЦикла;

//КонецПроцедуры // ЗаполнитьСчетаУчетаВТабЧастиУслуги()

//////////////////////////////////////////////////////////////////////////////////
//// ПРОЦЕДУРЫ И ФУНКЦИИ ДЛЯ ОБЕСПЕЧЕНИЯ ПРОВЕДЕНИЯ ДОКУМЕНТА

//Процедура ПодготовитьПараметрыУчетнойПолитики(СтруктураШапкиДокумента, Отказ, Заголовок)

//	// Прежде всего, проверим заполнение реквизита Организация в шапке документа
//	СтруктураОбязательныхПолей = Новый Структура("Организация");
//	// Теперь позовем общую процедуру проверки
//	ЗаполнениеДокументов.ПроверитьЗаполнениеШапкиДокумента(ЭтотОбъект, СтруктураОбязательныхПолей, Отказ, Заголовок);
//	// Организация не заполнена, получать учетную политику нет смысла
//	Если Отказ Тогда
//		Возврат;
//	КонецЕсли;
//	
//	УчетнаяПолитикаНУ = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(КонецМесяца(Дата), Отказ, Организация, "Нал");
//		
//	СтруктураШапкиДокумента.Вставить("ЕстьНалогНаПрибыль"             , УчетнаяПолитикаНУ.ЕстьНалогНаПрибыль);
//	СтруктураШапкиДокумента.Вставить("ЕстьНДС"                        , УчетнаяПолитикаНУ.ЕстьНДС);
//	
//	УчетнаяПолитикаБУ = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(КонецМесяца(Дата), Отказ, Организация, "Бух");
//		
//	СтруктураШапкиДокумента.Вставить("СпособОценкиТоваровВРознице"	  , УчетнаяПолитикаБУ.СпособОценкиТоваровВРознице);
//	
//	РазрешитьУчетУслугБезПлановыхЦен = Не УчетнаяПолитикаБУ.ПорядокРаспределенияРасходовНаОказаниеУслуг = Перечисления.ПорядокРаспределенияРасходовНаОказаниеУслуг.ПоПлановымЦенам;
//    СтруктураШапкиДокумента.Вставить("РазрешитьУчетУслугБезПлановыхЦен", РазрешитьУчетУслугБезПлановыхЦен);
//			
//КонецПроцедуры // ПодготовитьПараметрыУчетнойПолитики()


//// Выгружает результат запроса в табличную часть, добавляет ей необходимые колонки для проведения.
////
//// Параметры: 
////  РезультатЗапросаПоТоварам - результат запроса по табличной части "Товары",
////  СтруктураШапкиДокумента   - выборка по результату запроса по шапке документа.
////
//// Возвращаемое значение:
////  Сформированная таблиица значений.
////
//Функция ПодготовитьТаблицуУслуг(РезультатЗапросаПоТоварам, СтруктураШапкиДокумента, ПогрешностиОкругления)

//	ТаблицаТоваров = РезультатЗапросаПоТоварам.Выгрузить();

//	Если НЕ УчитыватьНДС Тогда
//		// для регламентного учета считаем НДС
//		ТаблицаТоваров.ЗаполнитьЗначения(Перечисления.СтавкиНДС.БезНДС, "СтавкаНДС");
//		ТаблицаТоваров.ЗаполнитьЗначения(0                            , "НДС");
//	КонецЕсли;

//   	НалоговыйУчет.ДобавитьКолонкиТоваровРегл(ТаблицаТоваров, СтруктураШапкиДокумента, ПогрешностиОкругления, Ложь);
//   		
//	// для списания укажем "кор. налоговое назначение" = нал. назначение доходов и затрат
//	// для отражения расходов по налогу на прибыль по списанной себестоимости
//	Если СтруктураШапкиДокумента.ЕстьНалогНаПрибыль Тогда	
//		
//		ТаблицаТоваров.Колонки.Добавить("НалоговоеНазначениеНовое", Новый ОписаниеТипов("СправочникСсылка.НалоговыеНазначенияАктивовИЗатрат"));
//		
//		Если СтруктураШапкиДокумента.НеОтноситьСебестоимостьЗапасовНаРасходыПоНУ Тогда
//			// расходы будем относить на нехоз. деятельность, это равнозначно непризнанию расходов по себестомости (при реализации товаров по авансу до 01.04)
//			ТаблицаТоваров.ЗаполнитьЗначения(Справочники.НалоговыеНазначенияАктивовИЗатрат.НКУ_НеХозДеятельность , "НалоговоеНазначениеНовое");
//		Иначе	
//			ТаблицаТоваров.ЗагрузитьКолонку(ТаблицаТоваров.ВыгрузитьКолонку("НалоговоеНазначениеДоходовИЗатрат") , "НалоговоеНазначениеНовое");
//		КонецЕсли;
//		
//	КонецЕсли;
//	
//	Возврат ТаблицаТоваров;

//КонецФункции // ПодготовитьТаблицуУслуг()


//Процедура ДобавитьКолонкиТоваровРегл(ТаблицаТоваров, СтруктураШапкиДокумента, ПогрешностиОкругления) Экспорт
//	
//	// Суммы в документе в валюте регл. учета
//	ТаблицаТоваров.Колонки.Добавить("СуммаБезНДСРегл"        , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТаблицаТоваров.Колонки.Добавить("СуммаНДСРегл"           , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТаблицаТоваров.Колонки.Добавить("СуммаСНДСРегл"          , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	
//	// Суммы в документе в валюте документа
//	ТаблицаТоваров.Колонки.Добавить("СуммаБезНДСВал"         , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТаблицаТоваров.Колонки.Добавить("СуммаНДСВал"            , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТаблицаТоваров.Колонки.Добавить("СуммаСНДСВал"           , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	
//	// Суммы в проводках в валюте регл. учета
//	ТаблицаТоваров.Колонки.Добавить("ПроводкиСуммаБезНДСРегл", ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТаблицаТоваров.Колонки.Добавить("ПроводкиСуммаНДСРегл"   , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТаблицаТоваров.Колонки.Добавить("ПроводкиСуммаСНДСРегл"  , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	
//	// Суммы в проводках в валюте документа
//	ТаблицаТоваров.Колонки.Добавить("ПроводкиСуммаБезНДСВал" , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТаблицаТоваров.Колонки.Добавить("ПроводкиСуммаНДСВал"    , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТаблицаТоваров.Колонки.Добавить("ПроводкиСуммаСНДСВал"   , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	
//	ТаблицаТоваров.Колонки.Добавить("СуммаПризнанногоДоходаПоДокументуРегл"   , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//		
//	// Заполним значения в добавленых колонках 
//	Для каждого СтрокаТаблицы Из ТаблицаТоваров Цикл
//		
//		// Рассчитаем суммы в документе в валюте документа
//		СтрокаТаблицы.СуммаСНДСВал    = СтрокаТаблицы.Сумма + ?(СуммаВключаетНДС, 0, СтрокаТаблицы.НДС);
//		СтрокаТаблицы.СуммаНДСВал     = СтрокаТаблицы.НДС;
//		СтрокаТаблицы.СуммаБезНДСВал  = СтрокаТаблицы.СуммаСНДСВал - СтрокаТаблицы.СуммаНДСВал;
//		
//		// Рассчитаем суммы в документе в валюте регл. учета
//		Если СтруктураШапкиДокумента.ВалютаДокумента = СтруктураШапкиДокумента.ВалютаРегламентированногоУчета Тогда
//			СтрокаТаблицы.СуммаСНДСРегл = СтрокаТаблицы.СуммаСНДСВал;
//			СтрокаТаблицы.СуммаНДСРегл  = СтрокаТаблицы.СуммаНДСВал;
//			
//			СтрокаТаблицы.СуммаПризнанногоДоходаПоДокументуРегл  = СтрокаТаблицы.СуммаПризнанногоДоходаПоДокументуВал;
//		Иначе
//			СтрокаТаблицы.СуммаСНДСРегл = МодульВалютногоУчета.ПересчитатьИзВалютыВВалюту(СтрокаТаблицы.СуммаСНДСВал, 
//												СтруктураШапкиДокумента.ВалютаДокумента,
//												СтруктураШапкиДокумента.ВалютаРегламентированногоУчета, 
//												СтруктураШапкиДокумента.КурсДокумента, 
//												1,
//												СтруктураШапкиДокумента.КратностьДокумента,
//												1,
//                                                , ПогрешностиОкругления, "СуммаСНДСРегл");
//			СтрокаТаблицы.СуммаНДСРегл  = Ценообразование.РассчитатьСуммуНДССУчетомПогрешности(СтрокаТаблицы.СуммаСНДСРегл,
//												СтруктураШапкиДокумента.УчитыватьНДС,
//												Истина,
//												СтрокаТаблицы.СтавкаНДС,
//												ПогрешностиОкругления);
//												
//			СтрокаТаблицы.СуммаПризнанногоДоходаПоДокументуРегл  = МодульВалютногоУчета.ПересчитатьИзВалютыВВалюту(СтрокаТаблицы.СуммаПризнанногоДоходаПоДокументуВал, 
//												СтруктураШапкиДокумента.ВалютаДокумента,
//												СтруктураШапкиДокумента.ВалютаРегламентированногоУчета, 
//												СтруктураШапкиДокумента.КурсДокумента, 
//												1,
//												СтруктураШапкиДокумента.КратностьДокумента,
//												1,
//  												, , );
//		КонецЕсли;
//		СтрокаТаблицы.СуммаБезНДСРегл = СтрокаТаблицы.СуммаСНДСРегл - СтрокаТаблицы.СуммаНДСРегл;
//		
//		// Рассчитаем суммы в проводках в валюте регл. учета и валюте документа
//		СтрокаТаблицы.ПроводкиСуммаСНДСРегл = СтрокаТаблицы.СуммаСНДСРегл;
//		СтрокаТаблицы.ПроводкиСуммаСНДСВал  = СтрокаТаблицы.СуммаСНДСВал;
//		// Определим значение НДС в проводках
//		Если СтруктураШапкиДокумента.УчитыватьНДС = Ложь Тогда
//			// в документе НДС не указывается
//			СтрокаТаблицы.ПроводкиСуммаНДСРегл = 0;
//			СтрокаТаблицы.ПроводкиСуммаНДСВал  = 0;
//		Иначе
//			СтрокаТаблицы.ПроводкиСуммаНДСРегл = СтрокаТаблицы.СуммаНДСРегл;
//			СтрокаТаблицы.ПроводкиСуммаНДСВал  = СтрокаТаблицы.СуммаНДСВал;
//		КонецЕсли;
//		СтрокаТаблицы.ПроводкиСуммаБезНДСРегл = СтрокаТаблицы.ПроводкиСуммаСНДСРегл - СтрокаТаблицы.ПроводкиСуммаНДСРегл;
//		СтрокаТаблицы.ПроводкиСуммаБезНДСВал  = СтрокаТаблицы.ПроводкиСуммаСНДСВал  - СтрокаТаблицы.ПроводкиСуммаНДСВал;
//		
//	КонецЦикла;
//	
//КонецПроцедуры

//////////////////////////////////////////////////////////////////////////////////
//// ПРОЦЕДУРЫ И ФУНКЦИИ ФОРМИРОВАНИЯ ДВИЖЕНИЙ ДОКУМЕНТА

//// Процедура формирует движения регистров по табличной части Услуги
////
//Процедура ДвиженияПоТабличнойЧастиУслуги(СтруктураШапкиДокумента, ТаблицаПоУслугам, ТаблицаПоСубподряднымРаботам, Заголовок, Отказ, РежимПроведения)

//	Если ТаблицаПоУслугам.Количество() = 0 и ТаблицаПоСубподряднымРаботам.Количество() = 0 Тогда
//		Возврат;
//	КонецЕсли;
//	
//	ТаблицаАвансов = Новый ТаблицаЗначений;
//	ФормированиеПроводокПоОтражениюВыручкиИНДС(СтруктураШапкиДокумента, ТаблицаПоУслугам, ТаблицаПоСубподряднымРаботам, Отказ, Заголовок, РежимПроведения,ТаблицаАвансов);
//	
//КонецПроцедуры // ДвиженияПоТабличнойЧастиУслуги()

//// Процедура формирует движения регистров по табличной части Услуги
//// отржение выручки и НДС
////
// Процедура ФормированиеПроводокПоОтражениюВыручкиИНДС(СтруктураШапкиДокумента, ТаблицаПоУслугам, ТаблицаПоСубподряднымРаботам, Отказ, Заголовок, РежимПроведения,ТаблицаАвансов)

//	ТекОрганизация = СтруктураШапкиДокумента.Организация;
//	ДатаДока       = Дата;
//	НомерЖурнала   = "";

//	Если ВидОперации = Перечисления.ИмпВидыОперацийРеализацияСтроительныхРаботУслуг.УслугиГенподрядчика Тогда			
//		СодержаниеПроводки = "Выручка от реализации услуг генподрядчика";
//	Иначе
//		СодержаниеПроводки = "Выручка от реализации СМР";
//	КонецЕсли;		
//	
//	//Фиксация выручки и НДС по БУ (проводки)

//	//Определение параметров учетной политики по отражению НДС с продажи
//	УчетнаяПолитика = РегистрыСведений.УчетнаяПолитикаНалоговыйУчет.ПолучитьПоследнее(Дата,Новый Структура("Организация",Организация)).МоментОпределенияНалоговойБазыНДС;

//	//Возможны корректировки таблиц при расчетах в у.е.
//	ТаблицаАвансов = БухгалтерскийУчетРасчетовСКонтрагентами.ЗачетАванса(ЭтотОбъект,СтруктураШапкиДокумента,Истина, мВалютаРегламентированногоУчета, новый структура("ТаблицаПоУслугам,ТаблицаПоСубподряднымРаботам",ТаблицаПоУслугам,ТаблицаПоСубподряднымРаботам), Отказ,Заголовок,НомерЖурнала);

//	ПроводкиБУ  = Движения.Хозрасчетный;

//	ВыручкаПоБУ = ТаблицаПоУслугам.Скопировать();
//	ОбщегоНазначения.ЗагрузитьВТаблицуЗначений(ТаблицаПоСубподряднымРаботам, ВыручкаПоБУ);
//	
//	ВыручкаПоБУ.Свернуть("СчетДоходовБУ, СубконтоБУ, СтавкаНДС","Сумма, СуммаВал, НДС, НДСВал");

//	Для каждого СтрокаТаблицы из ВыручкаПоБУ Цикл

//		// Выручка
//		Если СтрокаТаблицы.Сумма = 0 Тогда
//			Продолжить;
//		КонецЕсли;

//		Проводка = ПроводкиБУ.Добавить();

//		Проводка.Период       = ДатаДока;
//		Проводка.Организация  = СтруктураШапкиДокумента.Организация;
//		Проводка.Сумма        = СтрокаТаблицы.Сумма;
//		Проводка.Содержание   = СодержаниеПроводки;
//		Проводка.НомерЖурнала = НомерЖурнала;

//		Проводка.СчетДт      = СтруктураШапкиДокумента.СчетУчетаРасчетовСКонтрагентом;
//		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетДт,Проводка.СубконтоДт,"Контрагенты", СтруктураШапкиДокумента.Контрагент);
//		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетДт,Проводка.СубконтоДт,"Договоры",    СтруктураШапкиДокумента.ДоговорКонтрагента);
//		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетДт,Проводка.СубконтоДт,"ДокументыРасчетовСКонтрагентами", СтруктураШапкиДокумента.Ссылка);
//		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетДт,Проводка.СубконтоДт,"НоменклатурныеГруппы", СтруктураШапкиДокумента.НоменклатурнаяГруппа);

//		Если СтруктураШапкиДокумента.СчетУчетаРасчетовСКонтрагентом.Валютный Тогда
//			//Если документ в иностранной валюте, он может быть выписан только в валюте взаиморасчетов
//			Проводка.ВалютаДт        = СтруктураШапкиДокумента.ДоговорКонтрагента.ВалютаВзаиморасчетов;
//			Проводка.ВалютнаяСуммаДт = СтрокаТаблицы.СуммаВал;

//		КонецЕсли;

//		Проводка.СчетКт = СтрокаТаблицы.СчетДоходовБУ;
//		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетКт, Проводка.СубконтоКт, 1, СтрокаТаблицы.СубконтоБУ);
//		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетКт, Проводка.СубконтоКт, "СтавкиНДС", СтрокаТаблицы.СтавкаНДС);

//		// НДС
//		Если СтруктураШапкиДокумента.УчитыватьНДС И СтрокаТаблицы.НДС > 0 Тогда

//			Проводка = ПроводкиБУ.Добавить();

//			Проводка.Период      = ДатаДока;
//			Проводка.Организация = СтруктураШапкиДокумента.Организация;
//			Проводка.Сумма       = СтрокаТаблицы.НДС;
//			Проводка.Содержание		= НСтр("ru='Выделен НДС';uk='Виділений ПДВ'");
//			Проводка.НомерЖурнала = НомерЖурнала;

//			Проводка.СчетДт = ПланыСчетов.Хозрасчетный.Продажи_НДС;
//			БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетДт, Проводка.СубконтоДт, 1, СтрокаТаблицы.СубконтоБУ);
//			БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетДт, Проводка.СубконтоДт, "СтавкиНДС", СтрокаТаблицы.СтавкаНДС);

//			Если УчетнаяПолитика = Перечисления.МоментыОпределенияНалоговойБазыНДС.ПоОтгрузке Тогда
//				Проводка.СчетКт = ПланыСчетов.Хозрасчетный.НДС;
//				БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетКт,Проводка.СубконтоКт,"ВидыПлатежейВГосБюджет",Перечисления.ВидыПлатежейВГосБюджет.Налог);

//			Иначе
//				Проводка.СчетКт = ПланыСчетов.Хозрасчетный.РасчетыПоНДСотложенномуДляУплатыВБюджет;
//				БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетКт,Проводка.СубконтоКт,"Контрагенты",СтруктураШапкиДокумента.Контрагент);
//				БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетКт,Проводка.СубконтоКт,"Договоры",СтруктураШапкиДокумента.ДоговорКонтрагента);

//			КонецЕсли;

//		КонецЕсли;

//	КонецЦикла;
//	
//	//Учет курсовых разниц
//	Если (ВалютаДокумента <> мВалютаРегламентированногоУчета) тогда
//		БухгалтерскийУчет.ПереоценкаСчетовДокументаРегл(ЭтотОбъект,СтруктураШапкиДокумента, мВалютаРегламентированногоУчета,Отказ);
//	КонецЕсли;
//	// Учет курсовых разниц

//КонецПроцедуры // ФормированиеПроводокПоОтражениюВыручкиИНДС()

//#Если Клиент Тогда	 
//	
//// Возвращает доступные варианты печати документа
////
//// Вовращаемое значение:
////  Структура, каждая строка которой соответствует одному из вариантов печати
////  
//Функция ПолучитьСтруктуруПечатныхФорм() Экспорт
//	СтруктураМакетов = Новый Соответствие();
//	
//	СтруктураМакетов.Вставить("Акт", НСтр("ru='Акт об оказании услуг';uk='Акт про надання послуг'"));
//	Если ВидОперации <> Перечисления.ИмпВидыОперацийРеализацияСтроительныхРаботУслуг.УслугиГенподрядчика Тогда
//		//СтруктураМакетов.Вставить("КС-3Руб", "Справка о стоимости КС-3 (в руб.)");
//		//СтруктураМакетов.Вставить("КС-3Вал", "Справка о стоимости КС-3 (в вал. документа)");
//		СтруктураМакетов.Вставить("КБ3", "КБ-3");
//		//СтруктураМакетов.Вставить("М11", НСтр("ru='M-11 (Требование-накладная)';uk='M-11 ( Вимога-накладна)'"));
//		СтруктураМакетов.Вставить("Накладная", НСтр("ru='Требование-накладная';uk='Вимога-накладна'"));
//		СтруктураМакетов.Вставить("ФормаМ29", НСтр("ru='Форма М-29';uk='Форма М-29'"));
//		СтруктураМакетов.Вставить("ПримернаяФормаКБ2в", НСтр("ru='Примерная форма КБ-2в';uk='Примірна форма КБ-2в'"));
//	КонецЕсли;
//	
//	Возврат СтруктураМакетов;

//КонецФункции // ПолучитьСтруктуруПечатныхФорм()

//// Функция формирует табличный документ с печатной формой акта об
//// обказании услуг
////
//// Возвращаемое значение:
////  Табличный документ - печатная форма акта
////
//Функция ПечатьАктаОбОказанииУслуг()

//	ЗапросШапка = Новый Запрос;
//	ЗапросШапка.УстановитьПараметр("ТекущийДокумент", ЭтотОбъект.Ссылка);
//	ЗапросШапка.Текст =
//	"ВЫБРАТЬ
//	|	Номер,
//	|	Дата,
//	|	ДоговорКонтрагента,
//	|	Контрагент КАК Получатель,
//	|	Организация КАК Поставщик,
//	|	Организация,
//	|	НоменклатурнаяГруппа,
//	|	СуммаДокумента,
//	|	ВалютаДокумента,
//	|	УчитыватьНДС,
//	|	СуммаВключаетНДС
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг КАК ИмпРеализацияСтроительныхРаботУслуг
//	|
//	|ГДЕ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка = &ТекущийДокумент";
//	Шапка = ЗапросШапка.Выполнить().Выбрать();
//	Шапка.Следующий();

//	//Тептюк 09.10.2013
//	ЗапросУслуги = Новый Запрос;
//	ЗапросУслуги.УстановитьПараметр("ТекущийДокумент", ЭтотОбъект.Ссылка);
//	ЗапросУслуги.Текст = "ВЫБРАТЬ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Номенклатура КАК Номенклатура,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Номенклатура КАК Товар,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Количество,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Номенклатура.БазоваяЕдиницаИзмерения КАК ЕдиницаИзмерения,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Цена,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Сумма,
//	|	ИмпРеализацияСтроительныхРаботУслуг.СтавкаНДС,
//	|	ИмпРеализацияСтроительныхРаботУслуг.СуммаНДС,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка КАК ДокументРеализацияСтроительныхРабот
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг.Услуги КАК ИмпРеализацияСтроительныхРаботУслуг
//	|ГДЕ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка = &ТекущийДокумент";
//	//Тептюк 09.10.2013
//	
//	ТаблицаУслуги = ЗапросУслуги.Выполнить().Выгрузить();		

//	ТабДокумент = Новый ТабличныйДокумент;
//	ТабДокумент.ИмяПараметровПечати = "ПАРАМЕТРЫ_ПЕЧАТИ_АктОбОказанииПроизводственныхУслуг_Акт";
//	Макет       = ПолучитьМакет("Акт");

//	ОбластьМакета = Макет.ПолучитьОбласть("Заголовок");
//	ОбластьМакета.Параметры.ТекстЗаголовка = ОбщегоНазначения.СформироватьЗаголовокДокумента(Шапка, "Акт", Нстр("ru = ""ru""; uk = ""uk"""));
//	ТабДокумент.Вывести(ОбластьМакета);

//	ОбластьМакета = Макет.ПолучитьОбласть("Поставщик");
//	ПредставлениеПоставщика = ФормированиеПечатныхФорм.ОписаниеОрганизации(УправлениеКонтактнойИнформацией.СведенияОЮрФизЛице(Шапка.Организация, Шапка.Дата), "ПолноеНаименование,");
//	ОбластьМакета.Параметры.ПредставлениеПоставщика = ПредставлениеПоставщика;
//	ОбластьМакета.Параметры.Поставщик = Шапка.Поставщик;
//	ТабДокумент.Вывести(ОбластьМакета);

//	ОбластьМакета = Макет.ПолучитьОбласть("Покупатель");
//	ПредставлениеПолучателя = ФормированиеПечатныхФорм.ОписаниеОрганизации(УправлениеКонтактнойИнформацией.СведенияОЮрФизЛице(Шапка.Получатель, Шапка.Дата), "ПолноеНаименование,");
//	ОбластьМакета.Параметры.ПредставлениеПолучателя = ПредставлениеПолучателя;
//	ОбластьМакета.Параметры.Получатель = Шапка.Получатель;
//	ТабДокумент.Вывести(ОбластьМакета);


//	// Вывести табличную часть
//	ОбластьМакета = Макет.ПолучитьОбласть("ШапкаТаблицы");
//	ОбластьСтроки = Макет.ПолучитьОбласть("Строка");

//	ТабДокумент.Вывести(ОбластьМакета);			
//	
//	Если ВидОперации = Перечисления.ИмпВидыОперацийРеализацияСтроительныхРаботУслуг.УслугиГенподрядчика Тогда
//		Для каждого Строка из ТаблицаУслуги Цикл
//			ОбластьСтроки.Параметры.НомерСтроки = Строка(ТаблицаУслуги.Индекс(Строка) + 1) + ".";
//			ОбластьСтроки.Параметры.НаименованиеРаботы = СокрЛП(Строка.Номенклатура) + " по объекту """ + СокрЛП(ИмпСтроительство.НаименованиеОбъектаСтроительства(Шапка.НоменклатурнаяГруппа)) + """";
//			ОбластьСтроки.Параметры.ЕдиницаИзмерения = Строка.ЕдиницаИзмерения;
//			ОбластьСтроки.Параметры.Количество = Строка.Количество;
//			ОбластьСтроки.Параметры.Цена = Строка.Цена;
//			ОбластьСтроки.Параметры.Сумма = Строка.Сумма;
//			ТабДокумент.Вывести(ОбластьСтроки);
//		КонецЦикла;
//	Иначе
//		ОбластьСтроки.Параметры.НомерСтроки = "1.";
//		ОбластьСтроки.Параметры.НаименованиеРаботы = НСтр("ru='Строительно-монтажные работы по объекту ';uk=""Будівельно-монтажні роботи по об'єкту """)      + СокрЛП(ИмпСтроительство.НаименованиеОбъектаСтроительства(Шапка.НоменклатурнаяГруппа)) + "";
//		ОбластьСтроки.Параметры.ЕдиницаИзмерения = "шт.";
//		ОбластьСтроки.Параметры.Количество = 1;
//		ОбластьСтроки.Параметры.Цена = ТаблицаУслуги.Итог("Сумма");
//		ОбластьСтроки.Параметры.Сумма = ТаблицаУслуги.Итог("Сумма");
//		ТабДокумент.Вывести(ОбластьСтроки);
//	КонецЕсли;

//	Если ТаблицаУслуги <> Неопределено Тогда

//		Сумма    = ТаблицаУслуги.Итог("Сумма");
//		СуммаНДС = ТаблицаУслуги.Итог("СуммаНДС");

//	Иначе

//		Сумма    = 0;
//		СуммаНДС = 0;

//	КонецЕсли;

//	ОбластьМакета = Макет.ПолучитьОбласть("Итого");
//	ОбластьМакета.Параметры.Всего = ОбщегоНазначения.ФорматСумм(Сумма);
//	ТабДокумент.Вывести(ОбластьМакета);

//	Если Шапка.УчитыватьНДС Тогда

//		ОбластьМакета = Макет.ПолучитьОбласть("ИтогоНДС");
//		ОбластьМакета.Параметры.ВсегоНДС = ОбщегоНазначения.ФорматСумм(СуммаНДС);
//		ОбластьМакета.Параметры.НДС      = ?(Шапка.СуммаВключаетНДС, НСтр("ru='В том числе НДС';uk='У тому числі ПДВ'"), НСтр("ru=' Сумма НДС';uk=' Сума ПДВ'"));
//		ТабДокумент.Вывести(ОбластьМакета);

//	КонецЕсли;

//	СуммаКПрописи = Сумма + ?(Шапка.СуммаВключаетНДС, 0, СуммаНДС);
//	ОбластьМакета = Макет.ПолучитьОбласть("СуммаПрописью");
//	ОбластьМакета.Параметры.ИтоговаяСтрока =НСтр("ru='Всего оказано работ, услуг 1';uk='Всього виконано робіт, послуг 1'")
//	                                       + НСтр("ru=', на сумму ';uk=', на суму '") + ОбщегоНазначения.ФорматСумм(СуммаКПрописи, Шапка.ВалютаДокумента);
//	ОбластьМакета.Параметры.СуммаПрописью  = ОбщегоНазначения.СформироватьСуммуПрописью(СуммаКПрописи, Шапка.ВалютаДокумента, Нстр("ru = ""ru""; uk = ""uk"""));
//	ТабДокумент.Вывести(ОбластьМакета);

//	ОбластьМакета = Макет.ПолучитьОбласть("Подписи");
//	ТабДокумент.Вывести(ОбластьМакета);

//	Возврат ТабДокумент;

//КонецФункции // ПечатьАктаОбОказанииУслуг()

//// Функция формирует печатную форму "Акта КС-2"
////
//Функция ПечатьКС3(ФормироватьВРуб=Истина)		
//	
//	ЗапросШапка = Новый Запрос;
//	ЗапросШапка.УстановитьПараметр("ТекущийДокумент", ЭтотОбъект.Ссылка);
//	ЗапросШапка.Текст =
//	"ВЫБРАТЬ
//	|	Номер,
//	|	Дата,
//	|	ДоговорКонтрагента,
//	|	Контрагент,
//	|	НоменклатурнаяГруппа,
//	|	Организация,
//	|	Инвестор,	
//	|	ВалютаДокумента,
//	|	КратностьВзаиморасчетов,
//	|	КурсВзаиморасчетов,
//	|	ДатаНачала,
//	|	ДатаОкончания,
//	|	ПодписьПодрядчик,
//	|	ПодписьЗаказчик,	
//	|	УчитыватьНДС,
//	|	СуммаВключаетНДС
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг КАК ИмпРеализацияСтроительныхРаботУслуг
//	|
//	|ГДЕ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка = &ТекущийДокумент";
//	Шапка = ЗапросШапка.Выполнить().Выбрать();
//	Шапка.Следующий();
//		
//	ЗапросРаботыПоПериодам = Новый Запрос;	
//	ЗапросРаботыПоПериодам.УстановитьПараметр("Контрагент", Шапка.Контрагент);
//	ЗапросРаботыПоПериодам.УстановитьПараметр("ДоговорКонтрагента", Шапка.ДоговорКонтрагента);
//	ЗапросРаботыПоПериодам.УстановитьПараметр("НоменклатурнаяГруппа", Шапка.НоменклатурнаяГруппа);
//	ЗапросРаботыПоПериодам.УстановитьПараметр("НачалоГода", НачалоГода(Шапка.Дата));
//	ЗапросРаботыПоПериодам.УстановитьПараметр("ДатаНачала", Шапка.ДатаНачала);
//	ЗапросРаботыПоПериодам.УстановитьПараметр("ДатаОкончания", Шапка.ДатаОкончания);
//	ЗапросРаботыПоПериодам.УстановитьПараметр("ВидОперации", Перечисления.ИмпВидыОперацийРеализацияСтроительныхРаботУслуг.УслугиГенподрядчика);
//	ЗапросРаботыПоПериодам.УстановитьПараметр("ДатаДок", Шапка.Дата);
//	ЗапросРаботыПоПериодам.Текст = "ВЫБРАТЬ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Сумма,
//	|	ИмпРеализацияСтроительныхРаботУслуг.СуммаНДС,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка КАК ДокументРеализацияСтроительныхРабот,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка.СуммаВключаетНДС,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка.Дата,
//	|	ВЫБОР
//	|		КОГДА НАЧАЛОПЕРИОДА(ИмпРеализацияСтроительныхРаботУслуг.Ссылка.Дата, ГОД) = &НачалоГода
//	|			ТОГДА ВЫБОР
//	|					КОГДА ИмпРеализацияСтроительныхРаботУслуг.Ссылка.СуммаВключаетНДС
//	|						ТОГДА ИмпРеализацияСтроительныхРаботУслуг.Сумма - ИмпРеализацияСтроительныхРаботУслуг.СуммаНДС
//	|					ИНАЧЕ ИмпРеализацияСтроительныхРаботУслуг.Сумма
//	|				КОНЕЦ
//	|		ИНАЧЕ 0
//	|	КОНЕЦ КАК СуммаСНачалаГода,
//	|	ВЫБОР
//	|		КОГДА ИмпРеализацияСтроительныхРаботУслуг.Ссылка.Дата МЕЖДУ &ДатаНачала И &ДатаОкончания
//	|			ТОГДА ВЫБОР
//	|					КОГДА ИмпРеализацияСтроительныхРаботУслуг.Ссылка.СуммаВключаетНДС
//	|						ТОГДА ИмпРеализацияСтроительныхРаботУслуг.Сумма - ИмпРеализацияСтроительныхРаботУслуг.СуммаНДС
//	|					ИНАЧЕ ИмпРеализацияСтроительныхРаботУслуг.Сумма
//	|				КОНЕЦ
//	|		ИНАЧЕ 0
//	|	КОНЕЦ КАК СуммаЗаПериод,
//	|	ВЫБОР
//	|		КОГДА ИмпРеализацияСтроительныхРаботУслуг.Ссылка.СуммаВключаетНДС
//	|			ТОГДА ИмпРеализацияСтроительныхРаботУслуг.Сумма - ИмпРеализацияСтроительныхРаботУслуг.СуммаНДС
//	|		ИНАЧЕ ИмпРеализацияСтроительныхРаботУслуг.Сумма
//	|	КОНЕЦ КАК СуммаСНачалаРабот
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг.Услуги КАК ИмпРеализацияСтроительныхРаботУслуг
//	|ГДЕ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка.Контрагент = &Контрагент
//	|	И ИмпРеализацияСтроительныхРаботУслуг.Ссылка.ДоговорКонтрагента = &ДоговорКонтрагента
//	|	И ИмпРеализацияСтроительныхРаботУслуг.Ссылка.НоменклатурнаяГруппа = &НоменклатурнаяГруппа
//	|	И ИмпРеализацияСтроительныхРаботУслуг.Ссылка.Проведен
//	|	И ИмпРеализацияСтроительныхРаботУслуг.Ссылка.ВидОперации <> &ВидОперации
//	|	И ИмпРеализацияСтроительныхРаботУслуг.Ссылка.Дата <= &ДатаДок
//	|
//	|ОБЪЕДИНИТЬ ВСЕ
//	|
//	|ВЫБРАТЬ
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.Сумма,
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.СуммаНДС,
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка,
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.СуммаВключаетНДС,
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.Дата,
//	|	ВЫБОР
//	|		КОГДА НАЧАЛОПЕРИОДА(РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.Дата, ГОД) = &НачалоГода
//	|			ТОГДА ВЫБОР
//	|					КОГДА РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.СуммаВключаетНДС
//	|						ТОГДА РеализацияСтроительныхРаботСубподрядныеРаботы.Сумма - РеализацияСтроительныхРаботСубподрядныеРаботы.СуммаНДС
//	|					ИНАЧЕ РеализацияСтроительныхРаботСубподрядныеРаботы.Сумма
//	|				КОНЕЦ
//	|		ИНАЧЕ 0
//	|	КОНЕЦ,
//	|	ВЫБОР
//	|		КОГДА РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.Дата МЕЖДУ &ДатаНачала И &ДатаОкончания
//	|			ТОГДА ВЫБОР
//	|					КОГДА РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.СуммаВключаетНДС
//	|						ТОГДА РеализацияСтроительныхРаботСубподрядныеРаботы.Сумма - РеализацияСтроительныхРаботСубподрядныеРаботы.СуммаНДС
//	|					ИНАЧЕ РеализацияСтроительныхРаботСубподрядныеРаботы.Сумма
//	|				КОНЕЦ
//	|		ИНАЧЕ 0
//	|	КОНЕЦ,
//	|	ВЫБОР
//	|		КОГДА РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.СуммаВключаетНДС
//	|			ТОГДА РеализацияСтроительныхРаботСубподрядныеРаботы.Сумма - РеализацияСтроительныхРаботСубподрядныеРаботы.СуммаНДС
//	|		ИНАЧЕ РеализацияСтроительныхРаботСубподрядныеРаботы.Сумма
//	|	КОНЕЦ
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг.СубподрядныеРаботы КАК РеализацияСтроительныхРаботСубподрядныеРаботы
//	|ГДЕ
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.Контрагент = &Контрагент
//	|	И РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.ДоговорКонтрагента = &ДоговорКонтрагента
//	|	И РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.НоменклатурнаяГруппа = &НоменклатурнаяГруппа
//	|	И РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.Проведен
//	|	И РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.ВидОперации <> &ВидОперации
//	|	И РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка.Дата <= &ДатаДок";
//	
//	ТаблицаРаботПоПериодам = ЗапросРаботыПоПериодам.Выполнить().Выгрузить();
//	
//	
//	ЗапросУслуги = Новый Запрос;
//	ЗапросУслуги.УстановитьПараметр("ТекущийДокумент", ЭтотОбъект.Ссылка);
//	ЗапросУслуги.Текст = "ВЫБРАТЬ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Сумма,	
//	|	ИмпРеализацияСтроительныхРаботУслуг.СуммаНДС,
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка КАК ДокументРеализацияСтроительныхРабот
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг.Услуги КАК ИмпРеализацияСтроительныхРаботУслуг
//	|ГДЕ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка = &ТекущийДокумент
//	|
//	|ОБЪЕДИНИТЬ ВСЕ
//	|
//	|ВЫБРАТЬ
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.Сумма,	
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.СуммаНДС,
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг.СубподрядныеРаботы КАК РеализацияСтроительныхРаботСубподрядныеРаботы
//	|ГДЕ
//	|	РеализацияСтроительныхРаботСубподрядныеРаботы.Ссылка = &ТекущийДокумент";
//	ТаблицаУслуги = ЗапросУслуги.Выполнить().Выгрузить();
//	
//	
//	ТабДокумент = Новый ТабличныйДокумент;	

//	Если ФормироватьВРуб Тогда
//		ТабДокумент.ИмяПараметровПечати = "ПАРАМЕТРЫ_ПЕЧАТИ_КС3Руб";
//		Макет = ПолучитьМакет("КС3");
//	Иначе		
//		ТабДокумент.ИмяПараметровПечати = "ПАРАМЕТРЫ_ПЕЧАТИ_КС3";
//		Макет = ПолучитьМакет("КС3");
//	КонецЕсли;
//		
//	Если ФормироватьВРуб Тогда		
//		СуммаСНачалаРабот = МодульВалютногоУчета.ПересчитатьИзВалютыВВалюту(ТаблицаРаботПоПериодам.Итог("СуммаСНачалаРабот"), Шапка.ВалютаДокумента, мВалютаРегламентированногоУчета, Шапка.КурсВзаиморасчетов, 1, Шапка.КратностьВзаиморасчетов,1);
//		СуммаСНачалаГода  = МодульВалютногоУчета.ПересчитатьИзВалютыВВалюту(ТаблицаРаботПоПериодам.Итог("СуммаСНачалаГода"), Шапка.ВалютаДокумента, мВалютаРегламентированногоУчета, Шапка.КурсВзаиморасчетов, 1, Шапка.КратностьВзаиморасчетов,1);
//		СуммаЗаПериод     = МодульВалютногоУчета.ПересчитатьИзВалютыВВалюту(ТаблицаРаботПоПериодам.Итог("СуммаЗаПериод"), Шапка.ВалютаДокумента, мВалютаРегламентированногоУчета, Шапка.КурсВзаиморасчетов, 1, Шапка.КратностьВзаиморасчетов,1);
//		
//		НДСРуб   = МодульВалютногоУчета.ПересчитатьИзВалютыВВалюту(ТаблицаУслуги.Итог("СуммаНДС"), Шапка.ВалютаДокумента, мВалютаРегламентированногоУчета, Шапка.КурсВзаиморасчетов, 1, Шапка.КратностьВзаиморасчетов,1);
//		Если Шапка.СуммаВключаетНДС Тогда
//			СуммаРуб = МодульВалютногоУчета.ПересчитатьИзВалютыВВалюту(ТаблицаУслуги.Итог("Сумма"), Шапка.ВалютаДокумента, мВалютаРегламентированногоУчета, Шапка.КурсВзаиморасчетов, 1, Шапка.КратностьВзаиморасчетов,1) - НДСРуб;
//		Иначе
//			СуммаРуб = МодульВалютногоУчета.ПересчитатьИзВалютыВВалюту(ТаблицаУслуги.Итог("Сумма"), Шапка.ВалютаДокумента, мВалютаРегламентированногоУчета, Шапка.КурсВзаиморасчетов, 1, Шапка.КратностьВзаиморасчетов,1);
//		КонецЕсли;
//	Иначе
//		СуммаСНачалаРабот = ТаблицаРаботПоПериодам.Итог("СуммаСНачалаРабот");
//		СуммаСНачалаГода  = ТаблицаРаботПоПериодам.Итог("СуммаСНачалаГода");
//		СуммаЗаПериод     = ТаблицаРаботПоПериодам.Итог("СуммаЗаПериод");
//		
//		НДСРуб   = ТаблицаУслуги.Итог("СуммаНДС");
//		Если Шапка.СуммаВключаетНДС Тогда
//			СуммаРуб = ТаблицаУслуги.Итог("Сумма") - НДСРуб;
//		Иначе
//			СуммаРуб = ТаблицаУслуги.Итог("Сумма");
//		КонецЕсли;		
//	КонецЕсли;
//	ИтогоРуб = СуммаРуб + НДСРуб;		
//	
//	// Шапка
//	Область = Макет.ПолучитьОбласть("Шапка");
//	Область.Параметры.ДатаДок               = Формат(Шапка.Дата, "ДФ=dd.MM.yyyy");
//	Область.Параметры.НомерДок              = ОбщегоНазначения.ПолучитьНомерНаПечать(Шапка);
//	Область.Параметры.ДатаНачала            = Формат(Шапка.ДатаНачала, "ДФ=dd.MM.yyyy");
//	Область.Параметры.ДатаОкончания         = Формат(Шапка.ДатаОкончания, "ДФ=dd.MM.yyyy");	
//	Область.Параметры.Инвестор	 		    = ФормированиеПечатныхФорм.ОписаниеОрганизации(УправлениеКонтактнойИнформацией.СведенияОЮрФизЛице(Шапка.Инвестор, Шапка.Дата),"ПолноеНаименование,ЮридическийАдрес,Телефоны,");
//	Область.Параметры.ИнвесторКодПоОКПО		= Шапка.Инвестор.КодПоЕДРПОУ;
//	Область.Параметры.Заказчик	 		    = ФормированиеПечатныхФорм.ОписаниеОрганизации(УправлениеКонтактнойИнформацией.СведенияОЮрФизЛице(Шапка.Контрагент, Шапка.Дата),"ПолноеНаименование,ЮридическийАдрес,Телефоны,");
//	Область.Параметры.ЗаказчикКодПоОКПО		= Шапка.Контрагент.КодПоЕДРПОУ;
//	Область.Параметры.Подрядчик			    = ФормированиеПечатныхФорм.ОписаниеОрганизации(УправлениеКонтактнойИнформацией.СведенияОЮрФизЛице(Шапка.Организация, Шапка.Дата),"ПолноеНаименование,ЮридическийАдрес,Телефоны,");
//	Область.Параметры.Стройка   			= ИмпСтроительство.ОписаниеСтройки(Шапка.НоменклатурнаяГруппа.ХарактеристикиОбъектаСтроительства.Стройка);
//	Область.Параметры.КодСтройки   			= Шапка.НоменклатурнаяГруппа.ХарактеристикиОбъектаСтроительства.Стройка.КодСтройки;
//	ОбъСтрСтр = ИмпСтроительство.ОписаниеОбъектаСтроительства(Шапка.НоменклатурнаяГруппа.ХарактеристикиОбъектаСтроительства);
//	Область.Параметры.ОбъектСтроительства   = ?(ОбщегоНазначения.ЗначениеНеЗаполнено(ОбъСтрСтр),Шапка.НоменклатурнаяГруппа,ОбъСтрСтр);
//	Область.Параметры.КодОбъекта   			= Шапка.НоменклатурнаяГруппа.ХарактеристикиОбъектаСтроительства.КодОбъектаСтроительства;
//	Область.Параметры.ВалютаШапки  			= ?((Шапка.ВалютаДокумента = мВалютаРегламентированногоУчета) ИЛИ (ФормироватьВРуб), "руб.",Шапка.ВалютаДокумента);
//	Область.Параметры.НомерДоговора         = ДоговорКонтрагента.Номер;
//	Область.Параметры.ДатаД                 = Формат(ДоговорКонтрагента.Дата,"ДФ=dd.MM.yyyy"); 
//		
//	// Строки		
//	Область.Параметры.СуммаСНачалаРабот = СуммаСНачалаРабот;
//	Область.Параметры.СуммаСНачалаГода = СуммаСНачалаГода;
//	Область.Параметры.СуммаЗаПериод = СуммаЗаПериод;
//	Область.Параметры.СуммаРуб = СуммаРуб;
//	Область.Параметры.НДСРуб = НДСРуб;
//	Область.Параметры.ИтогоРуб = ИтогоРуб;
//	
//	ТабДокумент.Вывести(Область);
//		
//	
//	ДанныеФизЛицаСдал = ОбщегоНазначения.ДанныеФизЛица(Организация, ПодписьПодрядчик, Дата);	
//		
//	Область = Макет.ПолучитьОбласть("Подвал");
//	Область.Параметры.ПодрядчикДолжность  = ДанныеФизЛицаСдал.Должность;
//	Область.Параметры.ПодрядчикФИО		  = ДанныеФизЛицаСдал.Представление;	
//	Область.Параметры.ЗаказчикДолжность   = ПодписьЗаказчик.Должность;
//	Область.Параметры.ЗаказчикФИО		  = ПодписьЗаказчик.Наименование;	
//	
//	ТабДокумент.Вывести(Область);		
//	
//	Возврат ТабДокумент;

//КонецФункции // ПечатьКС3()

//Функция ПечатьКБ3() 

//	ТабДокумент = Новый ТабличныйДокумент;	

//	ТабДокумент.ИмяПараметровПечати = "ПАРАМЕТРЫ_ПЕЧАТИ_КБ3";
//	Макет = ПолучитьМакет("КБ3");	
//	
//	Область = Макет.ПолучитьОбласть("Стр1");
//	
//	Область.Параметры.ФирмаПолнНаименование = ?(ОбщегоНазначения.ЗначениеНеЗаполнено(Организация.НаименованиеПолное),Организация,Организация.НаименованиеПолное);
//	Отбор = Новый Структура;
//	Отбор.Вставить("Организация", Организация);
//	Область.Параметры.ЕДРПОУ = РегистрыСведений.КодыОрганизации.ПолучитьПоследнее(Дата, Отбор).КодПоЕДРПОУ;
//	Область.Параметры.Генподрядчик = "";
//	Область.Параметры.Субподрядчик = "";
//	Область.Параметры.Контрагент = Контрагент;
//	Область.Параметры.ДоговорНомерДоговора = ДоговорКонтрагента.Номер;
//	Область.Параметры.ДоговорДатаНачала = ДоговорКонтрагента.ДатаНачалаСтроительногоКонтракта;
//	Область.Параметры.ДатаДок = формат(дата,"ДФ=dd.MM.yy");	
//	
//	КО239 = 0;
//		
//	Область.Параметры.КОплюсСуммаБезНДС = КО239 + СуммаПередачиВыполненныхСМР;
//	Область.Параметры.СуммаБезНДС = СуммаПередачиВыполненныхСМР;
//	
//	Область.Параметры.СуммаНДС = СуммаНДС;
//	
//	ТабДокумент.Вывести(Область);	
//	
//	Возврат ТабДокумент;	

//КонецФункции

//Функция ПечатьМ29()
//	
//	Запрос = Новый Запрос;
//	Запрос.УстановитьПараметр("ТекущийДокумент", Ссылка);	
//	Запрос.Текст ="ВЫБРАТЬ
//	              |	ИмпРеализацияСтроительныхРаботУслугМатериалы.Номенклатура.НаименованиеПолное КАК Номенклатура,
//	              |	ИмпРеализацияСтроительныхРаботУслугМатериалы.Номенклатура.БазоваяЕдиницаИзмерения.Ссылка КАК Единица,
//	              |	ИмпРеализацияСтроительныхРаботУслугМатериалы.Количество КАК Количество,
//	              |	ИмпРеализацияСтроительныхРаботУслугМатериалы.Номенклатура.Артикул КАК Артикул
//	              |ИЗ
//	              |	Документ.ИмпРеализацияСтроительныхРаботУслуг.Материалы КАК ИмпРеализацияСтроительныхРаботУслугМатериалы
//	              |ГДЕ
//	              |	ИмпРеализацияСтроительныхРаботУслугМатериалы.Ссылка = &ТекущийДокумент";			  
//	 ЗапросМатериалы = Запрос.Выполнить().Выгрузить();
//	 
//	 ТабДокумент = Новый ТабличныйДокумент;
//	 Макет       = ПолучитьМакет("ФормаМ29");
//	 КодЯзыкаПечать = "uk";

//       	
//	 ОбластьМакета = Макет.ПолучитьОбласть("Шапка");
//	 ОбластьМакета.Параметры.Объект = ЭтотОбъект.НоменклатурнаяГруппа;	 
//	 ОбластьМакета.Параметры.Месяц = ПредставлениеПериода(НачалоМесяца(Дата), КонецМесяца(Дата), "ФП = Истина");
//	 ТабДокумент.Вывести(ОбластьМакета);
//	 
//	 ОбластьМакета = Макет.ПолучитьОбласть("Пробел1");
//	 ТабДокумент.Вывести(ОбластьМакета);

//	 
//	 ОбластьМакета = Макет.ПолучитьОбласть("ШапкаТаблицы");
//	 ТабДокумент.Вывести(ОбластьМакета);
//	
//		
//	 ОбластьМакета = Макет.ПолучитьОбласть("Строка");
//	 Для Каждого ВыборкаСтрок Из ЗапросМатериалы Цикл
//		
//		ОбластьМакета.Параметры.Заполнить(ВыборкаСтрок);
//		ОбластьМакета.Параметры.Номенклатура = ВыборкаСтрок.Номенклатура;
//		ОбластьМакета.Параметры.Кол  = ВыборкаСтрок.Количество;
//		ОбластьМакета.Параметры.Едиз = ВыборкаСтрок.Единица;
//		ТабДокумент.Вывести(ОбластьМакета);
//       
//	 КонецЦикла;

//	 ОбластьМакета = Макет.ПолучитьОбласть("Пробел2");
//	 ТабДокумент.Вывести(ОбластьМакета);

//     Возврат ТабДокумент;
//	
//КонецФункции

//Функция ПечатьКБ2в()
//	 
//	Запрос = Новый Запрос;
//	Запрос.УстановитьПараметр("ТекущийДокумент", Ссылка);
//	Запрос.Текст = "ВЫБРАТЬ
//	               |	ИмпРеализацияСтроительныхРаботУслугУслуги.НомерСтроки КАК НомерСтроки,
//	               |	ИмпРеализацияСтроительныхРаботУслугУслуги.Количество,
//	               |	ИмпРеализацияСтроительныхРаботУслугУслуги.Номенклатура,
//	               |	ИмпРеализацияСтроительныхРаботУслугУслуги.Цена,
//	               |	ИмпРеализацияСтроительныхРаботУслугУслуги.Сумма,
//	               |	ИмпРеализацияСтроительныхРаботУслугУслуги.СуммаНДС,
//	               |	ИмпРеализацияСтроительныхРаботУслугУслуги.Номенклатура.БазоваяЕдиницаИзмерения КАК ЕдиницаИзмерения
//	               |ИЗ
//	               |	Документ.ИмпРеализацияСтроительныхРаботУслуг.Услуги КАК ИмпРеализацияСтроительныхРаботУслугУслуги
//	               |ГДЕ
//	               |	ИмпРеализацияСтроительныхРаботУслугУслуги.Ссылка = &ТекущийДокумент
//	               |
//	               |УПОРЯДОЧИТЬ ПО
//	               |	НомерСтроки";			   
//	ЗапросУслуги = Запрос.Выполнить().Выгрузить();

//	ТабДокумент = Новый ТабличныйДокумент;
//	
//	
//	
//	Макет       = ПолучитьМакет("ПримернаяФормаКБ2в");
//	КодЯзыкаПечать = "uk";
//	
//	 

//	ОбластьМакета = Макет.ПолучитьОбласть("Шапка");
//	
//	ОбластьМакета.Параметры.Номер = ОбщегоНазначения.ПолучитьНомерНаПечать(ЭтотОбъект);
//	ОбластьМакета.Параметры.Месяц = ПредставлениеПериода(НачалоМесяца(Дата), КонецМесяца(Дата), "ФП = Истина");  
//	ОбластьМакета.Параметры.Организация = Организация.НаименованиеПолное;
//	ОбластьМакета.Параметры.ЕДРПОУ                        = Контрагент.КодПоЕДРПОУ;
//	ОбластьМакета.Параметры.Заказчик                      = Контрагент;
//	ОбластьМакета.Параметры.Договор                       = ДоговорКонтрагента;
//	ОбластьМакета.Параметры.НаймОб						  = ЭтотОбъект.НоменклатурнаяГруппа; 

//	ТабДокумент.Вывести(ОбластьМакета);
//	
//	ОбластьМакета = Макет.ПолучитьОбласть("ШапкаТаблицы");
//	ТабДокумент.Вывести(ОбластьМакета);
//	Ном            = 1;
//	
//	ОбластьМакета = Макет.ПолучитьОбласть("Строка");
//	Для Каждого ВыборкаСтрок Из ЗапросУслуги Цикл
//		
//		ОбластьМакета.Параметры.Заполнить(ВыборкаСтрок);
//		ОбластьМакета.Параметры.НомерСтроки = Ном;
//		ОбластьМакета.Параметры.Номенклатура = ВыборкаСтрок.Номенклатура;
//		ОбластьМакета.Параметры.Количество  = ВыборкаСтрок.Количество;
//		ОбластьМакета.Параметры.ЕдиницаИзмерения = ВыборкаСтрок.ЕдиницаИзмерения;
//		ОбластьМакета.Параметры.Цена = ВыборкаСтрок.Цена;
//		ОбластьМакета.Параметры.Затраты  = ВыборкаСтрок.Сумма;
//		ТабДокумент.Вывести(ОбластьМакета);
//       
//		  Ном = Ном + 1;
//		КонецЦикла;
//	ОбластьМакета = Макет.ПолучитьОбласть("Отступ");
//    ТабДокумент.Вывести(ОбластьМакета);
//		

//	ОбластьМакета = Макет.ПолучитьОбласть("Сум");
//	ОбластьМакета.Параметры.Сумма    = ЗапросУслуги.Итог("Сумма");
//	ОбластьМакета.Параметры.НДС = ОбщегоНазначения.ФорматСумм(Услуги.Итог("СуммаНДС"));
//	ОбластьМакета.Параметры.ЗНДС =  (ОбщегоНазначения.ФорматСумм(Услуги.Итог("Сумма") + ?(СуммаВключаетНДС, 0, Услуги.Итог("СуммаНДС"))));
//	ТабДокумент.Вывести(ОбластьМакета);

//	
//	ОбластьМакета = Макет.ПолучитьОбласть("Подвал");
//	ТабДокумент.Вывести(ОбластьМакета);

//    Возврат ТабДокумент;
//	 
//КонецФункции

////ИМП Куцый 05.07.13 
//// Функция формирует печатную форму М-11
//Функция ПечатьМ11()
//	
//	Запрос = Новый Запрос;
//	Запрос.УстановитьПараметр("ТекущийДокумент", Ссылка);
//	Запрос.УстановитьПараметр("НаДату"         , Дата);
//	Запрос.УстановитьПараметр("Организация"      , Организация);
//	Запрос.УстановитьПараметр("ГлавныйБухгалтер" , Перечисления.ОтветственныеЛицаОрганизаций.ГлавныйБухгалтер);
//	
//	Запрос.Текст = 
//	"ВЫБРАТЬ
//	|	Док.Номер                          КАК НомерДокумента,
//	|	Док.Дата                           КАК ДатаДокумента,
//	|	Док.Организация                    КАК Организация,
//	|	Док.Организация.НаименованиеПолное КАК ПредставлениеОрганизации,
//	|	Док.Склад                          КАК Склад,
//	|	КодыОрганизации.КодПоЕДРПОУ        КАК КодПоЕДРПОУ,
//	|	ФИОГлавныйБухгалтер.Фамилия + "" ""
//	|		+ ПОДСТРОКА(ФИОГлавныйБухгалтер.Имя, 1, 1) + "". ""
//	|		+ ПОДСТРОКА(ФИОГлавныйБухгалтер.Отчество, 1, 1) + ""."" КАК ГлавныйБухгалтер
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг КАК Док                                                     
//	|		ЛЕВОЕ СОЕДИНЕНИЕ 
//	|			РегистрСведений.КодыОрганизации.СрезПоследних(
//	|			                &НаДату, ) КАК КодыОрганизации
//	|		ПО Док.Организация = КодыОрганизации.Организация
//	|		ЛЕВОЕ СОЕДИНЕНИЕ 
//	|			РегистрСведений.ФИОФизЛиц.СрезПоследних(
//	|		                    &НаДату,
//	|		                    ФизЛицо В
//	|		                        (ВЫБРАТЬ
//	|		                            ОтветственныеЛица.ФизическоеЛицо
//	|		                        ИЗ
//	|		                            РегистрСведений.ОтветственныеЛицаОрганизаций.СрезПоследних(
//	|		                                            &НаДату,
//	|		                                            СтруктурнаяЕдиница = &Организация
//	|		                                            И ОтветственноеЛицо = &ГлавныйБухгалтер) КАК ОтветственныеЛица)
//	|		                    ) КАК ФИОГлавныйБухгалтер
//	|		ПО (ИСТИНА)
//	|ГДЕ
//	|	Док.Ссылка = &ТекущийДокумент";

//	Шапка = Запрос.Выполнить().Выбрать();
//	Шапка.Следующий();
//	                            
//	ТабДокумент = Новый ТабличныйДокумент;
//	ТабДокумент.ОриентацияСтраницы = ОриентацияСтраницы.Ландшафт;
//	ТабДокумент.ИмяПараметровПечати = "ПАРАМЕТРЫ_ПЕЧАТИ_ТребованиеНакладная_М11";
//	
//	// Вывод заголовка
//	Макет = ПолучитьОбщийМакет("М11");
//	Область = Макет.ПолучитьОбласть("Шапка");
//	Область.Параметры.Заполнить(Шапка);
//	Область.Параметры.КодОперации 	 = "Відпуск";
//	Область.Параметры.НомерДокумента = ОбщегоНазначения.ПолучитьНомерНаПечать(ЭтотОбъект);
//		
//	ТабДокумент.Вывести(Область);
//	
//	ВысотаШапки   = ТабДокумент.ВысотаТаблицы;
//	ШиринаТаблицы = ТабДокумент.ШиринаТаблицы;
//	ТабДокумент.ПовторятьПриПечатиСтроки = ТабДокумент.Область("R" + ВысотаШапки);
//	ТабДокумент.ОбластьПечати            = ТабДокумент.Область("C2:C" + ШиринаТаблицы);
//	
//	СтруктураПолей = Новый Структура;
//	СтруктураПолей.Вставить("СчетПередачи",                 "СчетЗатрат");
//	СтруктураПолей.Вставить("Материал",                     "Номенклатура");
//	СтруктураПолей.Вставить("МатериалНаименование",         "Номенклатура.НаименованиеПолное");
//	СтруктураПолей.Вставить("НоменклатурныйНомер",          "Номенклатура.Код");
//	СтруктураПолей.Вставить("ЕдиницаИзмеренияНаименование", "ЕдиницаИзмерения");
//	СтруктураПолей.Вставить("ЕдиницаИзмеренияКод",          "ЕдиницаИзмерения.Код");
//	СтруктураПолей.Вставить("Коэффициент",          		"Коэффициент");
//	СтруктураПолей.Вставить("Количество",                   "Количество");

//	Область = Макет.ПолучитьОбласть("Строка");
//	
//	ТаблицаМатериалов = ОбщегоНазначения.СформироватьЗапросПоТабличнойЧасти(ЭтотОбъект, "Материалы", СтруктураПолей).Выгрузить();
//	ТаблицаМатериалов.Свернуть("Материал, МатериалНаименование, СчетПередачи, НоменклатурныйНомер,ЕдиницаИзмеренияКод,ЕдиницаИзмеренияНаименование,Коэффициент", "Количество");
//	Если Не СчетаУчетаЗатратВТаблице Тогда
//		ТаблицаМатериалов.ЗаполнитьЗначения(СчетЗатрат, "СчетПередачи");
//	КонецЕсли;
//	
//	СтруктураПолей.Вставить("СчетПередачи",                 "СчетПередачи");
//	//ТаблицаМатериаловЗаказчика = ОбщегоНазначения.СформироватьЗапросПоТабличнойЧасти(ЭтотОбъект, "МатериалыЗаказчика", СтруктураПолей).Выгрузить();

//	// Поиск сумм списания активов для заполнения Цены и Суммы
//	ТаблицаСуммСписания = БухгалтерскийУчет.ПолучитьСуммуСписанияАктивов(ЭтотОБъект);
//	
//	ОбластьПодвал   = Макет.ПолучитьОбласть("Подвал");
//	ПараметрыПодвал = ОбластьПодвал.Параметры;
//	ПараметрыПодвал.Заполнить(Шапка);
//	
//	КоличествоВТаблице = ТаблицаМатериалов.Количество(); //+ ТаблицаМатериаловЗаказчика.Количество();
//	КоличествоОбработанных = 1;
//	// В форме сказано "Кількість найменувань". Будет выводится количество позиций.
//	ПараметрыПодвал.ИтогоКоличествоПрописью = ЧислоПрописью(КоличествоВТаблице, "Л=uk_UA;НП=Ложь;НД=Ложь;", ",,,,,,,,0");
//															
//	// сумму прописью выводим всегда на украинском - печатная форма регламенированная
//	ПараметрыПодвал.ИтогоСуммаПрописью = ЧислоПрописью(ТаблицаСуммСписания.Итог("Сумма"), "Л=uk_UA; ДП=Ложь", мВалютаРегламентированногоУчета.ПараметрыПрописиНаУкраинском);
//    
//	Для Каждого СтрокаТЧ Из ТаблицаМатериалов Цикл

//		Область = Макет.ПолучитьОбласть("Строка");
//		Область.Параметры.Заполнить(СтрокаТЧ);
//		
//		СтрокаСуммСписания =  ТаблицаСуммСписания.Найти(СтрокаТЧ.Материал, "Номенклатура");
//		Если СтрокаСуммСписания = Неопределено Тогда
//			 Область.Параметры.Цена = 0;
//			 Область.Параметры.Стоимость = 0;
//		 Иначе
//			 Цена = ?(СтрокаСуммСписания.Количество = 0, 0, СтрокаСуммСписания.Сумма / СтрокаСуммСписания.Количество * СтрокаТЧ.Коэффициент);
//			 Область.Параметры.Цена		 = Цена;
//			 Область.Параметры.Стоимость = Цена * СтрокаТЧ.Количество;
//		 КонецЕсли;
//		 
//		Если КоличествоОбработанных = КоличествоВТаблице Тогда
//			// Последняя запись. Ее не следует отрывать от подписей.
//			
//			МассивТаблиц = Новый Массив(2);
//			МассивТаблиц[0] = Область;
//			МассивТаблиц[1] = ОбластьПодвал;
//			
//			Если НЕ ТабДокумент.ПроверитьВывод(МассивТаблиц) Тогда
//				
//				ТабДокумент.ВывестиГоризонтальныйРазделительСтраниц();
//				
//			КонецЕсли;
//			
//		КонецЕсли;
//		
//		ТабДокумент.Вывести(Область);
//		КоличествоОбработанных = КоличествоОбработанных + 1;

//	КонецЦикла;
//	
//	ТабДокумент.Вывести(ОбластьПодвал);
//	
//	Возврат ТабДокумент;

//КонецФункции // ПечатьМ11()

//// Функция формирует печатную форму документа
////
//Функция ПечатьТребованиеНакладная()
//	
//ДопКолонка = Константы.ДополнительнаяКолонкаПечатныхФормДокументов.Получить();
//	Если ДопКолонка = Перечисления.ДополнительнаяКолонкаПечатныхФормДокументов.Артикул Тогда
//		ВыводитьКоды    = Истина;
//		Колонка         = "Артикул";
//		ТекстКодАртикул = "Артикул";
//	ИначеЕсли ДопКолонка = Перечисления.ДополнительнаяКолонкаПечатныхФормДокументов.Код Тогда
//		ВыводитьКоды    = Истина;
//		Колонка         = "Код";
//		ТекстКодАртикул = "Код";
//	Иначе
//		ВыводитьКоды    = Ложь;
//		Колонка         = "";
//		ТекстКодАртикул = "Код";
//	КонецЕсли;
//	
//	Если ВыводитьКоды Тогда
//		ОбластьШапки  = "ШапкаСКодом";
//		ОбластьСтроки = "СтрокаСКодом";
//	Иначе
//		ОбластьШапки  = "ШапкаТаблицы";
//		ОбластьСтроки = "Строка";
//	КонецЕсли;
//	//
//	ЗапросШапка = Новый Запрос;
//	ЗапросШапка.УстановитьПараметр("ТекущийДокумент", ЭтотОбъект.Ссылка);
//	ЗапросШапка.Текст =
//	"ВЫБРАТЬ
//	|	Номер,
//	|	Дата,
//	|   Ответственный.ФизЛицо.Наименование КАК Получил,
//	|	ДоговорКонтрагента,
//	|	Контрагент КАК Получатель,
//	|	Организация КАК Поставщик,
//	|   Склад,
//	|	Организация,
//	|	НоменклатурнаяГруппа,
//	|	СуммаДокумента,
//	|	ВалютаДокумента,
//	|	УчитыватьНДС,
//	|	СуммаВключаетНДС
//	|ИЗ
//	|	Документ.ИмпРеализацияСтроительныхРаботУслуг КАК ИмпРеализацияСтроительныхРаботУслуг
//	|
//	|ГДЕ
//	|	ИмпРеализацияСтроительныхРаботУслуг.Ссылка = &ТекущийДокумент";
//	Шапка = ЗапросШапка.Выполнить().Выбрать();
//	Шапка.Следующий();

//	Запрос = Новый Запрос;
//	Запрос.УстановитьПараметр("ТекущийДокумент", ЭтотОбъект.Ссылка);
//	Запрос.УстановитьПараметр("ПустаяЕдиницаИзмерения", Справочники.КлассификаторЕдиницИзмерения.ПустаяСсылка());
//	Запрос.Текст =
//	"ВЫБРАТЬ
//	|	Номенклатура,
//	|	ВЫРАЗИТЬ(Номенклатура.НаименованиеПолное КАК Строка(1000)) КАК Товар,
//	|	Номенклатура." + ТекстКодАртикул + " КАК КодАртикул,
//	|	Количество,
//	|	ЕдиницаИзмерения.Наименование КАК ЕдиницаИзмерения,
//	|   НомерСтроки,
//	|	1 КАК ID
//	|ИЗ 
//	|	(ВЫБРАТЬ
//	|		Номенклатура         КАК Номенклатура,
//	|		ЕдиницаИзмерения  КАК ЕдиницаИзмерения,
//	|		СУММА(Количество)    КАК Количество,
//	|		МИНИМУМ(НомерСтроки) КАК НомерСтроки
//	|	ИЗ
//	//
//	|		Документ.ИмпРеализацияСтроительныхРаботУслуг.Материалы КАК Материалы
//	//
//	|
//	|	ГДЕ
//	|		Материалы.Ссылка = &ТекущийДокумент
//	|	СГРУППИРОВАТЬ ПО
//	|		Номенклатура,
//	|		ЕдиницаИзмерения
//	|	) КАК ВложенныйЗапросПоТоварам
//	|УПОРЯДОЧИТЬ ПО
//	|	ID,
//	|	НомерСтроки";
//	ЗапросТовары = Запрос.Выполнить().Выгрузить();

//	ТабДокумент = Новый ТабличныйДокумент;
//	ТабДокумент.ИмяПараметровПечати = "ПАРАМЕТРЫ_ПЕЧАТИ_ТребованиеНакладная_ТН";
//	
//	// Вывод заголовка
//	Макет = ПолучитьМакет("ТребованиеНакладная");
//	
//	// печать производится на языке, указанном в настройках пользователя
//	КодЯзыкаПечать = Локализация.ПолучитьЯзыкФормированияПечатныхФорм(УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "РежимФормированияПечатныхФорм"));
//	Макет.КодЯзыкаМакета = КодЯзыкаПечать;

//	ОбластьМакета = Макет.ПолучитьОбласть("Заголовок");
//	ОбластьМакета.Параметры.ТекстЗаголовка = ОбщегоНазначения.СформироватьЗаголовокДокумента(Шапка, НСтр("ru='Требование-накладная';uk='Вимога-накладна'",КодЯзыкаПечать),КодЯзыкаПечать);

//	ТабДокумент.Вывести(ОбластьМакета);

//	СведенияОПоставщике = УправлениеКонтактнойИнформацией.СведенияОЮрФизЛице(Шапка.Поставщик, Шапка.Дата,,,КодЯзыкаПечать);

//	ОбластьМакета = Макет.ПолучитьОбласть("Поставщик");
//	ОбластьМакета.Параметры.Заполнить(Шапка);
//	ОбластьМакета.Параметры.ПредставлениеПоставщика = ФормированиеПечатныхФорм.ОписаниеОрганизации(СведенияОПоставщике, "ПолноеНаименование,",,КодЯзыкаПечать);	
//	ОбластьМакета.Параметры.РеквизитыПоставщика =     ФормированиеПечатныхФорм.ОписаниеОрганизации(СведенияОПоставщике, "ЮридическийАдрес,Телефоны,/,КодПоЕДРПОУ,КодПоДРФО,",,КодЯзыкаПечать);
//    ТабДокумент.Вывести(ОбластьМакета);
//	
//	// Выводим дополнительно информацию о договоре и сделке
//	СписокДополнительныхПараметров = "Склад,";
//	МассивСтруктурСтрок = ФормированиеПечатныхФорм.ДополнительнаяИнформация(Шапка,СписокДополнительныхПараметров,КодЯзыкаПечать);
//	ОбластьМакета = Макет.ПолучитьОбласть("ДопИнформация");
//    Для каждого СтруктураСтроки Из МассивСтруктурСтрок Цикл
//		ОбластьМакета.Параметры.Заполнить(СтруктураСтроки);
//		ТабДокумент.Вывести(ОбластьМакета);
//	КонецЦикла;
//	
//	// Вывести табличную часть
//	ОбластьМакета = Макет.ПолучитьОбласть(ОбластьШапки);
//    Если ВыводитьКоды Тогда
//		ОбластьМакета.Параметры.ИмяКолонкиКодов = ТекстКодАртикул;
//	КонецЕсли;
//	
//	ТабДокумент.Вывести(ОбластьМакета);

//	ОбластьМакета = Макет.ПолучитьОбласть(ОбластьСтроки);
//	Для каждого ВыборкаСтрокТовары Из ЗапросТовары Цикл 

//		Если НЕ ЗначениеЗаполнено(ВыборкаСтрокТовары.Номенклатура) Тогда
//			Сообщить(НСтр("ru='В одной из строк не заполнено значение номенклатуры - строка при печати пропущена.';uk='В одному з рядків не заповнене значення номенклатури - рядок під час друку буде пропущений.'"), СтатусСообщения.Важное);
//			Продолжить;
//		КонецЕсли;

//		ОбластьМакета.Параметры.Заполнить(ВыборкаСтрокТовары);
//		ОбластьМакета.Параметры.Товар 		= СокрЛП(ВыборкаСтрокТовары.Товар);
//		ОбластьМакета.Параметры.НомерСтроки = ЗапросТовары.Индекс(ВыборкаСтрокТовары) + 1;
//		ТабДокумент.Вывести(ОбластьМакета);

//	КонецЦикла;

//	// Вывести Итого
//	ОбластьМакета = Макет.ПолучитьОбласть("Итого");
//	ТабДокумент.Вывести(ОбластьМакета);

//	// Вывести подписи
//	ОбластьМакета = Макет.ПолучитьОбласть("Подписи");
//	ОбластьМакета.Параметры.Заполнить(Шапка);
//	ТабДокумент.Вывести(ОбластьМакета);

//	Возврат ТабДокумент;

//	
//КонецФункции // ПечатьТребованиеНакладная()
////ИМП Куцый 05.07.13 

//// Процедура осуществляет печать документа. Можно направить печать на 
//// экран или принтер, а также распечатать необходмое количество копий.
////
////  Название макета печати передается в качестве параметра,
//// по переданному названию находим имя макета в соответствии.
////
//// Параметры:
////  НазваниеМакета - строка, название макета.
////
//Процедура Печать(ИмяМакета, КоличествоЭкземпляров = 1, НаПринтер = Ложь) Экспорт

//	Если ЭтоНовый() Тогда
//		Предупреждение(НСтр("ru='Документ можно распечатать только после его записи';uk='Документ можна роздрукувати тільки після його запису'"));
//		Возврат;
//	КонецЕсли; 

//	Если Не РаботаСДиалогами.ПроверитьМодифицированность(ЭтотОбъект) Тогда
//		Возврат;
//	КонецЕсли;

//	// Получить экземпляр документа на печать
//	Если      ИмяМакета = "Акт" Тогда
//		ТабДокумент = ПечатьАктаОбОказанииУслуг();
//		
//	ИначеЕсли      ИмяМакета = "КС-3Руб" Тогда
//		ТабДокумент = ПечатьКС3(Истина);
//		
//	ИначеЕсли      ИмяМакета = "КС-3Вал" Тогда
//		ТабДокумент = ПечатьКС3(Ложь);
//		
//	ИначеЕсли      ИмяМакета = "КБ3" Тогда
//		ТабДокумент = ПечатьКБ3();
//		
//	ИначеЕсли ИмяМакета = "ФормаМ29" Тогда
//		ТабДокумент = ПечатьМ29();	
//		
//	ИначеЕсли ИмяМакета = "ПримернаяФормаКБ2в" Тогда
//		ТабДокумент = ПечатьКБ2в();
//		
//	//ИМП Куцый 05.07.13 	
//	ИначеЕсли      ИмяМакета = "Накладная" Тогда
//		ТабДокумент = ПечатьТребованиеНакладная();
//		
//	ИначеЕсли ИмяМакета = "М11" Тогда
//		ТабДокумент = ПечатьМ11();
//    //ИМП Куцый 05.07.13 	

//	КонецЕсли;
//	
//	УниверсальныеМеханизмы.НапечататьДокумент(ТабДокумент, КоличествоЭкземпляров, НаПринтер, ОбщегоНазначения.СформироватьЗаголовокДокумента(ЭтотОбъект));

//КонецПроцедуры // Печать


//#КонецЕсли

//////////////////////////////////////////////////////////////////////////////////
//// ОБРАБОТЧИКИ СОБЫТИЙ

//// Процедура вызывается перед записью документа 
////
//Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)

//	// Посчитать суммы документа и записать ее в соответствующий реквизит шапки для показа в журналах
//	Если ВидОперации = Перечисления.ИмпВидыОперацийРеализацияСтроительныхРаботУслуг.УслугиГенподрядчика Тогда
//		СуммаДокумента = УчетНДС.ПолучитьСуммуДокументаСНДС(ЭтотОбъект, "Услуги");
//		СубподрядныеРаботы.Очистить();
//	Иначе
//		СуммаДокумента = УчетНДС.ПолучитьСуммуДокументаСНДС(ЭтотОбъект, "Услуги");
//		//+ УчетНДС.ПолучитьСуммуДокументаСНДС(ЭтотОбъект, "СубподрядныеРаботы");
//	КонецЕсли;

//	//СинхронизацияПометкиНаУдалениеУСчетаФактуры(ЭтотОбъект);
//	
//	мУчетнаяПолитикаНУ = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Дата, Отказ, Организация, "Нал");
//	Если НЕ мУчетнаяПолитикаНУ.СхемаНалогообложения.НДС Тогда
//		// организация - не плательщик НДС. Установим во всех ТЧ признак соответствующего учета НДС
//		НеОБлНДСДеятельность = Справочники.НалоговыеНазначенияАктивовИЗатрат.НДС_НеоблагаемаяХозДеятельность;
//		
//		Для каждого СтрокаТЧ  Из Услуги Цикл
//		    СтрокаТЧ.НалоговоеНазначение = НеОБлНДСДеятельность;
//		КонецЦикла; 
//				
//	КонецЕсли;
//	
//	Если НЕ мУчетнаяПолитикаНУ.ЕстьНалогНаПрибыль Тогда
//						
//		Для каждого СтрокаТЧ  Из Услуги Цикл
//		    СтрокаТЧ.НалоговоеНазначениеДоходовИЗатрат = Неопределено;
//		КонецЦикла; 
//		
//	КонецЕсли;
//	
//	Если ЕстьАвансДо01042011 Тогда
//		Если НеОтноситьСебестоимостьЗапасовНаРасходыПоНУ Тогда
//			СуммаВДВРПоАвансуДо01042011	= СуммаДокумента;
//		КонецЕсли;
//	Иначе	
//		НеОтноситьСебестоимостьЗапасовНаРасходыПоНУ = Ложь;
//	КонецЕсли;

//КонецПроцедуры // ПередЗаписью

//// Процедура - обработчик события "ОбработкаПроведения"
////
//Процедура ОбработкаПроведения(Отказ, РежимПроведения)

//	Перем   ТаблицаПоУслугамНДС; 
//	Перем ТаблицаМатериалов;
//	#Если Клиент Тогда
//	
//	ПогрешностиОкругления     = Новый Соответствие;
//	
//	Заголовок = ОбщегоНазначения.ПредставлениеДокументаПриПроведении(Ссылка);

//	ПроверкаРеквизитов(Отказ, Заголовок);

//	Если Отказ Тогда
//		Возврат;
//	КонецЕсли;
//	
//	Если ДоговорКонтрагента.ИмпСтроительныйКонтракт = Ложь тогда
//		Сообщить("Договір має бути будівельним контрактом", СтатусСообщения.Важное);
//		Проведен = Ложь;
//		Возврат;
//	КонецЕсли;	

//	Заголовок = ОбщегоНазначения.ПредставлениеДокументаПриПроведении(Ссылка);

//	Если ОбщегоНазначения.РучнаяКорректировкаОбработкаПроведения(РучнаяКорректировка,Отказ,Заголовок,ЭтотОбъект) Тогда
//		Возврат;
//	КонецЕсли;

//	СтруктураШапкиДокумента = ОбщегоНазначения.СформироватьСтруктуруШапкиДокумента(ЭтотОбъект);

//	// Заполним по шапке документа дерево параметров, нужных при проведении.
//	ДеревоПолейЗапросаПоШапке = ОбщегоНазначения.СформироватьДеревоПолейЗапросаПоШапке();
//	ОбщегоНазначения.ДобавитьСтрокуВДеревоПолейЗапросаПоШапке(ДеревоПолейЗапросаПоШапке, "ДоговорыКонтрагентов", 	"Организация"          		, "ДоговорОрганизация");
//	ОбщегоНазначения.ДобавитьСтрокуВДеревоПолейЗапросаПоШапке(ДеревоПолейЗапросаПоШапке, "Сделка"              , 	"ВидОперации"          		, "СделкаВидОперации");
//	ОбщегоНазначения.ДобавитьСтрокуВДеревоПолейЗапросаПоШапке(ДеревоПолейЗапросаПоШапке, "ПодразделениеОрганизации", "ПодразделениеОрганизации"	, "ПодразделениеОрганизации");
//	ОбщегоНазначения.ДобавитьСтрокуВДеревоПолейЗапросаПоШапке(ДеревоПолейЗапросаПоШапке, "ДоговорыКонтрагентов", "ВидДоговора", "ВидДоговора");

//	ОбщегоНазначения.ДобавитьСтрокуВДеревоПолейЗапросаПоШапке(ДеревоПолейЗапросаПоШапке, "ДоговорыКонтрагентов", "ВедениеВзаиморасчетовНУ", "ВедениеВзаиморасчетовНУ");
//		
//	// Сформируем запрос на дополнительные параметры, нужные при проведении, по данным шапки документа
//	СтруктураШапкиДокумента = УправлениеЗапасами.СформироватьЗапросПоДеревуПолей(ЭтотОбъект, ДеревоПолейЗапросаПоШапке, СтруктураШапкиДокумента, мВалютаРегламентированногоУчета);
//	
//	СтруктураШапкиДокумента.Вставить("СложныйНалоговыйУчет" , Ложь); 
//	    	
//	// Получим данные учетной политики
//	ПодготовитьПараметрыУчетнойПолитики(СтруктураШапкиДокумента, Отказ, Заголовок);
//	
//	//ИМП Куцый 02.07.13 Для Форум Крым
//	//Подготовка таблицы Собственные ТМЦ
//	ПодготовитьТаблицыДокументаСобственныеТМЦ(СтруктураШапкиДокумента, ТаблицаМатериалов, Отказ, Заголовок);
//	 	ПроверкаРеквизитовТЧ(ТаблицаМатериалов, СтруктураШапкиДокумента, Отказ, Заголовок);
//	
//	Если НЕ Отказ Тогда
//		// Формирование движения регистров
//		ДвиженияПоРегистрам(СтруктураШапкиДокумента, ТаблицаМатериалов, Отказ, Заголовок, РежимПроведения);
//	КонецЕсли;
//    Движения.Хозрасчетный.ВыполнитьДействияПередЗаписьюДвижений();
//	//ИМП Куцый 02.07.13 Для Форум Крым
//	
//	// Подготовим таблицу услуг для проведения.
//	СтруктураПолей = Новый Структура();
//	СтруктураПолей.Вставить("Номенклатура"        , "Номенклатура");
//	СтруктураПолей.Вставить("Услуга"              , "Номенклатура.Услуга");
//	СтруктураПолей.Вставить("Количество"          , "Количество");
//	СтруктураПолей.Вставить("Сумма"               , "Сумма");
//	СтруктураПолей.Вставить("Цена"                , "Цена");
//	СтруктураПолей.Вставить("СтавкаНДС"           , "СтавкаНДС");
//	СтруктураПолей.Вставить("НДС"                 , "СуммаНДС");
//	СтруктураПолей.Вставить("НомерСтроки"         , "НомерСтроки");
//	СтруктураПолей.Вставить("СчетДоходовБУ"       , "СчетДоходовБУ");
//	СтруктураПолей.Вставить("СчетРасходовБУ"      , "СчетРасходовБУ");
//	//ИМП Куцый 12.09.13
//	СтруктураПолей.Вставить("СубконтоРасходовБУ1"      , "СхемаРеализации.СубконтоСебестоимости1");
//	СтруктураПолей.Вставить("СубконтоРасходовБУ2"      , "СхемаРеализации.СубконтоСебестоимости2");
//	СтруктураПолей.Вставить("СубконтоРасходовБУ3"      , "СхемаРеализации.СубконтоСебестоимости3");
//	//ИМП Куцый 12.09.13
//	СтруктураПолей.Вставить("СубконтоБУ"          , "СубконтоБУ");
//	СтруктураПолей.Вставить("СуммаПлановая"       , "СуммаПлановая");
// 	СтруктураПолей.Вставить("СхемаРеализации"     , "СхемаРеализации");
//	СтруктураПолей.Вставить("НалоговоеНазначениеДоходовИЗатрат"	, "НалоговоеНазначениеДоходовИЗатрат");

//	РезультатЗапросаПоУслугам = ОбщегоНазначения.СформироватьЗапросПоТабличнойЧасти(ЭтотОбъект, "Услуги", СтруктураПолей);
//	
//	// Подготовим таблицу услуг для проведения.
//	ТаблицаПоУслугам = ПодготовитьТаблицуУслугСтарое(Ложь,РезультатЗапросаПоУслугам, СтруктураШапкиДокумента, ПогрешностиОкругления);
//    ТаблицаПоУслугамНовая = ПодготовитьТаблицуУслугСтарое(Истина,РезультатЗапросаПоУслугам, СтруктураШапкиДокумента, ПогрешностиОкругления);
//	
//	ПодготовитьТаблицыДокумента(СтруктураШапкиДокумента, ТаблицаПоУслугамНДС, Отказ, Заголовок);

//	// Проверить заполнение ТЧ .
//	ПроверитьЗаполнениеТабличнойЧастиУслуги(ТаблицаПоУслугамНДС,      СтруктураШапкиДокумента, Отказ, Заголовок);
//	
//	////Проверим на возможность проведения в БУ и НУ
//	УправлениеВзаиморасчетами.ПроверкаВозможностиПроведенияВ_БУ_НУ(СтруктураШапкиДокумента,СтруктураШапкиДокумента.ДоговорКонтрагента, Отказ, Заголовок);
//													 																									 
//	// Субподрядные работы
//	
//	// Подготовим таблицу услуг для проведения.
//	СтруктураПолей = Новый Структура();
//	СтруктураПолей.Вставить("Контрагент"          , "Контрагент");
//	СтруктураПолей.Вставить("ДоговорКонтрагента"        , "ДоговорКонтрагента");
//	СтруктураПолей.Вставить("ПодразделениеОрганизации"  , "ПодразделениеОрганизации");
//	СтруктураПолей.Вставить("Номенклатура"        , "Номенклатура");
//	СтруктураПолей.Вставить("Количество"          , "Количество");
//	СтруктураПолей.Вставить("Сумма"               , "Сумма");	
//	СтруктураПолей.Вставить("Цена"                , "Цена");
//	СтруктураПолей.Вставить("СтавкаНДС"           , "СтавкаНДС");
//	СтруктураПолей.Вставить("НДС"                 , "СуммаНДС");
//	СтруктураПолей.Вставить("НомерСтроки"         , "НомерСтроки");
//	СтруктураПолей.Вставить("СчетДоходовБУ"       , "СчетДоходовБУ");
//	СтруктураПолей.Вставить("СчетРасходовБУ"      , "СчетРасходовБУ");
//	СтруктураПолей.Вставить("СубконтоБУ"          , "СубконтоБУ");
//	СтруктураПолей.Вставить("НалоговоеНазначениеДоходовИЗатрат"	, "НалоговоеНазначениеДоходовИЗатрат");
//		
//	РезультатЗапросаПоСубподряднымРаботам = ОбщегоНазначения.СформироватьЗапросПоТабличнойЧасти(ЭтотОбъект, "СубподрядныеРаботы", СтруктураПолей);
//	
//	// Подготовим таблицу услуг для проведения.
//	ТаблицаПоСубподряднымРаботам = ПодготовитьТаблицуУслугСтарое(Ложь,РезультатЗапросаПоСубподряднымРаботам, СтруктураШапкиДокумента, ПогрешностиОкругления);

//	//ПодготовкаТаблицыЗначенийДляЦелейПриобретенияИРеализации(ТаблицаПоСубподряднымРаботам, СтруктураШапкиДокумента, Истина);

//	////Проверим на возможность проведения в БУ и НУ
//	УправлениеВзаиморасчетами.ПроверкаВозможностиПроведенияВ_БУ_НУ(СтруктураШапкиДокумента, СтруктураШапкиДокумента.ДоговорКонтрагента, Отказ, Заголовок);

//	// Движения по документу
//	Если Не Отказ Тогда
//		ДвиженияПоРегистрам_ИмпРеализацияСтроительныхРаботУслуг(глКомпонентаЗащиты, ЭтотОбъект, Движения, мВалютаРегламентированногоУчета,РежимПроведения, СтруктураШапкиДокумента, ТаблицаПоУслугам, ТаблицаПоУслугамНДС, ТаблицаПоСубподряднымРаботам, Отказ, Заголовок);
//		ДвиженияРегистровВыпускаПродукцииУслугРеализацияСтроительныхРаботУслуг( глКомпонентаЗащиты, Отказ, Движения, Ссылка, СтруктураШапкиДокумента, ТаблицаПоУслугамНовая, ТаблицаПоУслугам);
//	КонецЕсли;

//	Если ДоговорКонтрагента.ВедениеВзаиморасчетов = Перечисления.ВедениеВзаиморасчетовПоДоговорам.ПоДоговоруВЦелом Тогда
//		Если СуммаАванса <> 0 Тогда
//			Проводки = Движения.Хозрасчетный;
//			НепогашенныйАванс = СуммаАванса;
//			Для каждого Проводка из Проводки Цикл
//				Если Строка(Проводка.СчетДт) = "6811" Тогда
//					Если НепогашенныйАванс=0 Тогда
//						Проводки.Удалить(Проводка);
//					Иначе
//						Если Проводка.Сумма>НепогашенныйАванс Тогда
//							Проводка.Сумма = НепогашенныйАванс;
//							НепогашенныйАванс = 0;
//						Иначе
//							НепогашенныйАванс = НепогашенныйАванс - Проводка.Сумма;
//						КонецЕсли;
//					КонецЕсли;
//				КонецЕсли;
//			КонецЦикла;
//			Если НепогашенныйАванс<>0 Тогда
//				Предупреждение(НСтр("ru='Недостаточно аванса на сумму ';uk='Не вистачає авансу на суму '")+Формат(НепогашенныйАванс,"ЧЦ=15; ЧДЦ=2"));
//				Отказ = Истина;
//			КонецЕсли;
//			УдаленыВсеПроводкиНДС = Ложь;
//			Пока не УдаленыВсеПроводкиНДС Цикл
//				УдаленыВсеПроводкиНДС = Истина;
//				Для каждого Проводка из Проводки Цикл
//					Если ((Строка(Проводка.СчетКт) = "6431") или (Строка(Проводка.СчетКт) = "6432")) и НДСиВРнаРАЗНИЦУ и (не Отказ)Тогда
//						Проводки.Удалить(Проводка);
//						УдаленыВсеПроводкиНДС = Ложь;
//					КонецЕсли;
//				КонецЦикла;
//			КонецЦикла;
//			Если НДСиВРнаРАЗНИЦУ и (не Отказ)Тогда
//				СоздатьПроводкуНДС(Проводки);
//			КонецЕсли
//		КонецЕсли;
//	КонецЕсли;	
//	Если Отказ Тогда
//		Возврат;
//	КонецЕсли;
//	
//	#КонецЕсли
//	
//КонецПроцедуры // ОбработкаПроведения()

//Процедура СоздатьПроводкуНДС(Проводки)
//	Если СтавкаНДСдляРасчНУ = Перечисления.СтавкиНДС.НДС20 Тогда
//		НоваяПроводка = Проводки.Добавить();
//		НоваяПроводка.Активность = Истина;
//		НоваяПроводка.Организация = Организация;
//		НоваяПроводка.Период = Дата;
//		НоваяПроводка.Содержание = НСтр("ru='НДС:налоговые обязательства:отгрузка';uk='ПДВ:податкові зобов''язання:відвантаження'");
//		НоваяПроводка.СубконтоДт.СтатьиДоходов = СубконтоСтатьяДоходов;
//		НоваяПроводка.СубконтоДт.НоменклатурныеГруппы = НоменклатурнаяГруппа;
//		НоваяПроводка.СубконтоКт.Контрагенты = Контрагент;
//		НоваяПроводка.СубконтоКт.Договоры = ДоговорКонтрагента;
//		НоваяПроводка.СчетДт = ПланыСчетов.Хозрасчетный.ДоходОтРеализацииРаботИУслуг;
//		НоваяПроводка.СчетКт = ПланыСчетов.Хозрасчетный.НалоговыеОбязательстваНеподтвержденные;
//		НоваяПроводка.Сумма = (СуммаПризнанногоДоходаПоДокументу - СуммаАванса)/6;
//	КонецЕсли;
//КонецПроцедуры

//Процедура ОбработкаЗаполнения(Основание) 
//	
//	
//	Если ТипЗнч(Основание) = Тип("ДокументСсылка.ИмпОпределениеОбъемовВыполненияСМР") Тогда
//		// Заполнение шапки
//		Для Каждого ТекСтрокаМатериалы Из Основание.Материалы Цикл
//			НоваяСтрока = Материалы.Добавить();
//			НоваяСтрока.Количество = ТекСтрокаМатериалы.Количество;
//			НоваяСтрока.Номенклатура = ТекСтрокаМатериалы.Номенклатура;
//			НоваяСтрока.ЕдиницаИзмерения=ТекСтрокаМатериалы.Номенклатура.БазоваяЕдиницаИзмерения;
//			НоваяСтрока.Коэффициент=ОбработкаТабличныхЧастей.ПолучитьКоэффициентЕдиницыИзмерения(НоваяСтрока.Номенклатура, НоваяСтрока.ЕдиницаИзмерения);
//			ЗаполнитьСчетаУчетаВСтрокеТабЧастиНаОсновании(НоваяСтрока.Номенклатура, "Материалы", Истина, Истина);
//			НоваяСтрока.Счет=мСчет;
//			НоваяСтрока.НалоговоеНазначение=мНалоговоеНазначение;
//			НоваяСтрока.НалоговоеНазначениеДоходовИЗатрат=мНалоговоеНазначениеДоходовИЗатрат;
//		КонецЦикла;
//		
//		СуммаВключаетНДС = Основание.СуммаВключаетНДС;
//		
//	ДокументОснование = Основание;
//	НоменклатурнаяГруппа = Основание.НоменклатурнаяГруппа;
//	Организация = Основание.Организация;
//	Контрагент = Основание.Контрагент;
//	ДоговорКонтрагента = Основание.договорКонтрагента;
//	КратностьВзаиморасчетов = Основание.КратностьВзаиморасчетов;
//	КурсВзаиморасчетов = Основание.КурсВзаиморасчетов;
//	ТабРабот = Основание.Работы.Выгрузить();
//	Услуги.Загрузить(ТабРабот);
//	
//		ИначеЕсли ТипЗнч(Основание) = Тип("ДокументСсылка.СчетНаОплатуПокупателю") Тогда
//		// Заповнення шапки
//		ВалютаДокумента = Основание.ВалютаДокумента;
//		ДоговорКонтрагента = Основание.ДоговорКонтрагента;
//		Комментарий = Основание.Комментарий;
//		Контрагент = Основание.Контрагент;
//		КратностьВзаиморасчетов = Основание.КратностьВзаиморасчетов;
//		КурсВзаиморасчетов = Основание.КурсВзаиморасчетов;
//		Организация = Основание.Организация;
//		Ответственный = Основание.Ответственный;
//		Склад = Основание.Склад;
//		СуммаВключаетНДС = Основание.СуммаВключаетНДС;
//		СуммаДокумента = Основание.СуммаДокумента;
//		ТипЦен = Основание.ТипЦен;
//		УчитыватьНДС = Основание.УчитыватьНДС;
//		
//		// Сделку и табличные части заполняем только если взаиморасчеты ведутся не по расчетным документам.
//		 Если ДоговорКонтрагента.ВедениеВзаиморасчетов = Перечисления.ВедениеВзаиморасчетовПоДоговорам.ПоРасчетнымДокументам Тогда
//			Сделка = Основание;
//		 КонецЕсли;	

//		Для Каждого ТекСтрокаУслуги Из Основание.Услуги Цикл
//			НоваяСтрока = Услуги.Добавить();
//			НоваяСтрока.Количество = ТекСтрокаУслуги.Количество;
//			НоваяСтрока.Номенклатура = ТекСтрокаУслуги.Номенклатура;
//			НоваяСтрока.СтавкаНДС = ТекСтрокаУслуги.СтавкаНДС;
//			НоваяСтрока.Сумма = ТекСтрокаУслуги.Сумма;
//			НоваяСтрока.СуммаНДС = ТекСтрокаУслуги.СуммаНДС;
//			НоваяСтрока.Цена = ТекСтрокаУслуги.Цена;
//		КонецЦикла;
//		 ИначеЕсли ТипЗнч(Основание) = Тип("ДокументСсылка.ИмпПриемкаСтроительныхРаботУслуг") Тогда
//		// Заповнення шапки
//		ВалютаДокумента = Основание.ВалютаДокумента;
//		ДоговорКонтрагента = Основание.ДоговорКонтрагента;
//		Комментарий = Основание.Комментарий;
//		Контрагент = Основание.Контрагент;
//		КратностьВзаиморасчетов = Основание.КратностьВзаиморасчетов;
//		КурсВзаиморасчетов = Основание.КурсВзаиморасчетов;
//		Организация = Основание.Организация;
//		Ответственный = Основание.Ответственный;
//		Склад = Основание.Склад;
//		 Для Каждого ТекСтрокаМатериалы Из Основание.ТМЦсубподрядчика Цикл
//			НоваяСтрока = ТМЦсубподрядчика.Добавить();
//			НоваяСтрока.Количество = ТекСтрокаМатериалы.Количество;
//			НоваяСтрока.Номенклатура = ТекСтрокаМатериалы.Номенклатура;
//			НоваяСтрока.ЕдиницаИзмерения=ТекСтрокаМатериалы.Номенклатура.БазоваяЕдиницаИзмерения;
//			НоваяСтрока.Сумма=ТекСтрокаМатериалы.Сумма;
//			НоваяСтрока.Цена=ТекСтрокаМатериалы.Цена;
//		КонецЦикла;
//		


//	КонецЕсли;


//	
//КонецПроцедуры


// // Проверяет правильность заполнения строк табличной части "Товары".
////  ТаблицаПоТоварам        - таблица значений, содержащая данные для проведения и проверки ТЧ Товары
////  СтруктураШапкиДокумента - выборка из результата запроса по шапке документа,
////  Отказ                   - флаг отказа в проведении.
////  Заголовок               - строка, заголовок сообщения об ошибке проведения.

//// Выгружает результат запроса в табличную часть, добавляет ей необходимые колонки для проведения.
////
//// Параметры: 
////  РезультатЗапросаПоТоварам - результат запроса по табличной части "Товары",
////  СтруктураШапкиДокумента   - выборка по результату запроса по шапке документа.
////
//// Возвращаемое значение:
////  Сформированная таблиица значений.
////
//Функция ПодготовитьТаблицуУслугСтарое (НовыйВариант,РезультатЗапросаПоУслугам, СтруктураШапкиДокумента, ПогрешностиОкругления)
//    Если НовыйВариант Тогда
//		ТаблицаУслуг = РезультатЗапросаПоУслугам.Выгрузить();

//		Возврат ТаблицаУслуг;
//	КонецЕсли;
//	
//	ТЗ = новый ТаблицаЗначений;
//	
//	ТЗ.Колонки.Добавить("СтавкаНДС"    );
//	
//	ТЗ.Колонки.Добавить("СчетУчетаНДС"   );
//	ТЗ.Колонки.Добавить("Сумма"   , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТЗ.Колонки.Добавить("НДС"   , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТЗ.Колонки.Добавить("СуммаПризнанногоДоходаПоДокументуВал"   , ОбщегоНазначения.ПолучитьОписаниеТиповЧисла(15,2));
//	ТЗ.Колонки.Добавить("НалоговоеНазначениеДоходовИЗатрат");
//	ТЗ.Колонки.Добавить("НалоговоеНазначение");
//	//ИМП Куцый 12.09.13
//	ТЗ.Колонки.Добавить("СчетРасходовБУ");
//	ТЗ.Колонки.Добавить("СубконтоРасходовБУ1");
//	ТЗ.Колонки.Добавить("СубконтоРасходовБУ2");
//	ТЗ.Колонки.Добавить("СубконтоРасходовБУ3");
//	ТЗ.Колонки.Добавить("Номенклатура");
//	//ИМП Куцый 12.09.13
//	
//	Стр = ТЗ.Добавить();
//	
//	Стр.СтавкаНДС = СтавкаНДСдляРасчНУ;
//	
//	Стр.НалоговоеНазначениеДоходовИЗатрат = ?(РезультатЗапросаПоУслугам.Выгрузить().Количество() = 0, Неопределено, РезультатЗапросаПоУслугам.Выгрузить()[0].НалоговоеНазначениеДоходовИЗатрат);
//	
//	//ИМП Куцый 12.09.13
//	Стр.СубконтоРасходовБУ1 = СтруктураШапкиДокумента.НоменклатурнаяГруппа;
//	Стр.СубконтоРасходовБУ2 = Справочники.СхемыРеализации.Услуги.СубконтоСебестоимости2;
//	//ИМП Куцый 12.09.13
//	
//	Стр.СчетУчетаНДС = ПланыСчетов.Хозрасчетный.РасчетыПоНДС;
//	
//	Стр.Сумма = ?(СуммаВключаетНДС,СуммаПередачиВыполненныхСМР+СуммаНДС,СуммаПередачиВыполненныхСМР);
//	
//	Стр.НДС = СуммаНДС;
//	Стр.СуммаПризнанногоДоходаПоДокументуВал = СуммаПризнанногоДоходаПоДокументу;
//	Для Каждого СтрУсл из Услуги Цикл
//		Стр.НалоговоеНазначение=СтрУсл.НалоговоеНазначение;
//	КонецЦикла;
//	
//	Если НЕ УчитыватьНДС Тогда
//		// для регламентного учета считаем НДС
//		ТЗ.ЗаполнитьЗначения(Перечисления.СтавкиНДС.БезНДС, "СтавкаНДС");
//		ТЗ.ЗаполнитьЗначения(0                            , "НДС");
//	КонецЕсли;

//	ДобавитьКолонкиТоваровРегл(ТЗ, СтруктураШапкиДокумента, ПогрешностиОкругления);
//	
//	
//	возврат ТЗ;

//КонецФункции // ПодготовитьТаблицуУслуг()

//Процедура ПроверитьЗаполнениеТабличнойЧастиУслуги(ТаблицаПоУслугам, СтруктураШапкиДокумента, Отказ, Заголовок)

//	ИмяТабличнойЧасти = "Услуги";

//	// Укажем, что надо проверить:
//	СтруктураОбязательныхПолей = Новый Структура("Номенклатура, Количество, Сумма");

//	Если СтруктураШапкиДокумента.УчитыватьНДС Тогда
//		СтруктураОбязательныхПолей.Вставить("СтавкаНДС");
//	КонецЕсли;

//	СтруктураОбязательныхПолей.Вставить("СхемаРеализации");
//	
//	// Теперь позовем общую процедуру проверки.
//	ЗаполнениеДокументов.ПроверитьЗаполнениеТабличнойЧасти(ЭтотОбъект, "Услуги", СтруктураОбязательныхПолей, Отказ, Заголовок);

//	// Схемы реализации должны быть заполнены правильно
//	СтруктураПараметровПроверки = Новый Структура;
//	СтруктураПараметровПроверки.Вставить("СчетДоходовБУ",  "СчетДоходов");
//	
//	Если СтруктураШапкиДокумента.РазрешитьУчетУслугБезПлановыхЦен Тогда
//		СтруктураПараметровПроверки.Вставить("СчетРасходовБУ",  "СчетСебестоимости");
//	КонецЕсли;	
//	
//	БухгалтерскийУчет.ПроверитьСхемыРеализацииТабличнойЧастиНаЗаполненость(ЭтотОбъект, "Услуги", , ТаблицаПоУслугам, 
//														 СтруктураПараметровПроверки,
//														 СтруктураШапкиДокумента,
//														 Отказ, Заголовок);	

//	// построчная проверка
//	НеоблагаемыйВНД = Справочники.ВидыНалоговойДеятельности.НеОблагаемая;
//	НехозВНД_НП		= Справочники.НалоговыеНазначенияАктивовИЗатрат.НКУ_НеХозДеятельность;
//	Если (    СтруктураШапкиДокумента.ЕстьНалогНаПрибыль 
//		   ИЛИ СтруктураШапкиДокумента.ЕстьНДС) Тогда
//		
//		Для каждого СтрокаТЧ Из ТаблицаПоУслугам Цикл
//			
//			СтрокаНачалаСообщенияОбОшибке = Локализация.СтрШаблон(НСтр("ru='В строке номер ""¤1¤"" табличной части ""Услуги"": ';uk='У рядку номер ""¤1¤"" табличної частини ""Послуги"": '"), СокрЛП(СтрокаТЧ.НомерСтроки));
//			
//			Если СтруктураШапкиДокумента.ЕстьНалогНаПрибыль Тогда   
//				
//				Если НЕ ЗначениеЗаполнено(СтрокаТЧ.НалоговоеНазначениеДоходовИЗатрат) Тогда
//					СтрокаСообщения = НСтр("ru = 'Не заполнено значение реквизита ""Налоговое назначение (доходов и затрат) ""!'; uk = 'Не заповнене значення реквізиту ""Податкове призначення (доходів та витрат)""!'");
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаНачалаСообщенияОбОшибке + СтрокаСообщения, Отказ, Заголовок);
//				ИначеЕсли СтрокаТЧ.НалоговоеНазначениеДоходовИЗатрат = НехозВНД_НП Тогда 
//					СтрокаСообщения = НСтр("ru = 'Указано некорректное налоговое назначение доходов! Вид налоговой деятельности при реализации не может быть ""Не хозяйственной деятельностью"".'; uk = 'Вказано некоректне податкове призначення доходів! Вид податкової діяльності при реалізації не може бути ""Не господарською діяльністю"".'");
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаНачалаСообщенияОбОшибке + СтрокаСообщения, Отказ, Заголовок);
//				КонецЕсли;
//				
//			КонецЕсли;
//			
//			Если ОбщегоНазначения.ЗначениеНеЗаполнено(СтрокаТЧ.НалоговоеНазначение) Тогда
//				СтрокаСообщения = НСтр("ru='Не заполнено значение реквизита ""Налоговое назначение""!';uk='Не заповнене значення реквізиту ""Податкове призначення""!'");
//				ОбщегоНазначения.ОшибкаПриПроведении(СтрокаНачалаСообщенияОбОшибке + СтрокаСообщения, Отказ, Заголовок);
//			Иначе
//				// проверим корректность указания налогового назначения
//				// по всем его реквизитам
//				Если  СтруктураШапкиДокумента.ЕстьНалогНаПрибыль 
//					И СтрокаТЧ.ВидНалоговойДеятельности = НеоблагаемыйВНД Тогда
//					
//					СтрокаСообщения = НСтр("ru='Указано некорректное налоговое назначение! Вид налоговой деятельности при реализации не может быть ""Не хозяйственной деятельностью""';uk='Вказано некоректне податкове призначення! Вид податкової діяльності при реалізації не може бути ""Не господарською діяльністю""'");
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаНачалаСообщенияОбОшибке + СтрокаСообщения, Отказ, Заголовок);
//					
//				КонецЕсли;
//				
//				Если СтруктураШапкиДокумента.ЕстьНалогНаПрибыль 
//					И СтрокаТЧ.Амортизируется Тогда
//					
//					СтрокаСообщения = НСтр("ru='Указано некорректное налоговое назначение: установлен признак ""Амортизируется""!';uk='Вказано некоректне податкове призначення: встановлена ознака ""Амортизується""!'");
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаНачалаСообщенияОбОшибке + СтрокаСообщения, Отказ, Заголовок);
//					
//				КонецЕсли;
//				
//				Если СтруктураШапкиДокумента.ЕстьНДС 
//					И НЕ СтрокаТЧ.СтавкаНДС.Пустая()
//					И НЕ СтрокаТЧ.ВидДеятельностиНДС = УчетНДС.ПолучитьВидДеятельностиНДС(СтрокаТЧ.СтавкаНДС) Тогда
//					
//					Если СтруктураШапкиДокумента.УчитыватьНДС Тогда
//						СтрокаСообщения = НСтр("ru='Указано некорректное налоговое назначение! Вид деятельности НДС не соответствует ставке НДС, указанной в строке';uk='Вказано некоректне податкове призначення! Вид діяльності ПДВ не відповідає ставці ПДВ, вказаній в рядку'");
//					Иначе	
//						СтрокаСообщения = НСтр("ru='Указано некорректное налоговое назначение! Вид деятельности НДС должен быть ""Необлагаемая""';uk='Вказано некоректне податкове призначення! Вид діяльності ПДВ повинен бути ""Неоподатковувана""'");
//					КонецЕсли;
//					
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаНачалаСообщенияОбОшибке + СтрокаСообщения, Отказ, Заголовок);
//					
//				КонецЕсли;
//				
//			КонецЕсли;
//		КонецЦикла;	
//		
//	КонецЕсли;

//КонецПроцедуры // ПроверитьЗаполнениеТабличнойЧастиУслуги()

//Процедура ПодготовитьТаблицыДокумента(СтруктураШапкиДокумента, ТаблицаПоУслугам, Отказ, Заголовок) Экспорт
//	
//	ПогрешностиОкругления     = Новый Соответствие;
//	ПогрешностиОкругленияТара = Новый Соответствие;

//	
//	СтруктураПолей = Новый Структура();
//	СтруктураПростыхПолей = Новый Структура;
//	СтруктураСложныхПолей = Новый Структура;

//	// Получим необходимые данные для проведения и проверки заполенения данные 
//	// по табличной части "Услуги".
//	СтруктураПолей = Новый Структура();
//	СтруктураПолей.Вставить("Номенклатура"  , "Номенклатура");
//	СтруктураПолей.Вставить("Услуга"        , "Номенклатура.Услуга");
//	СтруктураПолей.Вставить("БланкСтрогогоУчета", "Номенклатура.БланкСтрогогоУчета");
//	СтруктураПолей.Вставить("Количество"    , "Количество");
//	СтруктураПолей.Вставить("Сумма"         , "Сумма");
//	СтруктураПолей.Вставить("СтавкаНДС"     , "СтавкаНДС");
//	СтруктураПолей.Вставить("НДС"           , "СуммаНДС");
//	СтруктураПолей.Вставить("СхемаРеализации",     "СхемаРеализации");
//	СтруктураПолей.Вставить("СчетДоходовБУ" ,      "СхемаРеализации.СчетДоходов");
//	СтруктураПолей.Вставить("СубконтоДоходовБУ1",  "СхемаРеализации.СубконтоДоходов1");
//	СтруктураПолей.Вставить("СубконтоДоходовБУ2",  "СхемаРеализации.СубконтоДоходов2");
//	СтруктураПолей.Вставить("СубконтоДоходовБУ3",  "СхемаРеализации.СубконтоДоходов3");
//	СтруктураСложныхПолей.Вставить("НоменклатурнаяГруппа","Ссылка.НоменклатурнаяГруппа");
//	
//	СтруктураПолей.Вставить("СчетРасходовБУ"   ,"СхемаРеализации.СчетСебестоимости");
//	СтруктураПолей.Вставить("СубконтоРасходовБУ1",  "СхемаРеализации.СубконтоСебестоимости1");
//	СтруктураПолей.Вставить("СубконтоРасходовБУ2",  "СхемаРеализации.СубконтоСебестоимости2");
//	СтруктураПолей.Вставить("СубконтоРасходовБУ3",  "СхемаРеализации.СубконтоСебестоимости3");

//	СтруктураПолей.Вставить("НалоговоеНазначение"     		   , "НалоговоеНазначение");
//	СтруктураПолей.Вставить("ВидНалоговойДеятельности"     	   , "НалоговоеНазначение.ВидНалоговойДеятельности");
//	СтруктураПолей.Вставить("Амортизируется"     			   , "НалоговоеНазначение.Амортизируется");
//	СтруктураПолей.Вставить("ВидДеятельностиНДС"     		   , "НалоговоеНазначение.ВидДеятельностиНДС");
//	СтруктураСложныхПолей.Вставить("СчетУчетаНДС"    	, "ВЫБОР КОГДА СчетУчетаНДС = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) ТОГДА Ссылка.СчетУчетаНДС ИНАЧЕ СчетУчетаНДС КОНЕЦ");
//	
//	СтруктураПолей.Вставить("НалоговоеНазначениеДоходовИЗатрат", "НалоговоеНазначениеДоходовИЗатрат");
//	СтруктураПолей.Вставить("СуммаПлановая"       , "СуммаПлановая");
//    СтруктураПолей.Вставить("НомерСтроки"         , "НомерСтроки");
//	
//	РезультатЗапросаПоУслугам = ОбщегоНазначения.СформироватьЗапросПоТабличнойЧасти(ЭтотОбъект, "Услуги", СтруктураПолей, СтруктураПростыхПолей, СтруктураСложныхПолей);	
//	
//	// Подготовим таблицу услуг для проведения.
//	ТаблицаПоУслугам = ПодготовитьТаблицуУслуг(РезультатЗапросаПоУслугам, СтруктураШапкиДокумента, ПогрешностиОкругления);
//	
//	СтруктураПолей = Новый Структура();
//	СтруктураПростыхПолей = Новый Структура;
//	СтруктураСложныхПолей = Новый Структура;

//	// Получим необходимые данные для проведения и проверки заполенения данные 
//	// по табличной части "Услуги".
//	СтруктураПолей = Новый Структура();
//	СтруктураПолей.Вставить("Номенклатура"  , "Номенклатура");
//	СтруктураПолей.Вставить("Услуга"        , "Номенклатура.Услуга");
//	СтруктураПолей.Вставить("БланкСтрогогоУчета", "Номенклатура.БланкСтрогогоУчета");
//	СтруктураПолей.Вставить("Количество"    , "Количество");
//	СтруктураПолей.Вставить("Сумма"         , "Сумма");
//	СтруктураПолей.Вставить("СтавкаНДС"     , "СтавкаНДС");
//	СтруктураПолей.Вставить("НДС"           , "СуммаНДС");		
//	
//	СтруктураСложныхПолей.Вставить("СчетУчетаНДС"    	, "Ссылка.СчетУчетаНДС");
//	СтруктураСложныхПолей.Вставить("НоменклатурнаяГруппа","Ссылка.НоменклатурнаяГруппа");
//                                                                                                
//    СтруктураПолей.Вставить("НомерСтроки"         , "НомерСтроки");
//	СтруктураПолей.Вставить("НалоговоеНазначениеДоходовИЗатрат", "НалоговоеНазначениеДоходовИЗатрат");
//		//чтобы не брало дважды
//	//
//	//РезультатЗапросаПоСубподрядам = ОбщегоНазначения.СформироватьЗапросПоТабличнойЧасти(ЭтотОбъект, "СубподрядныеРаботы", СтруктураПолей, СтруктураПростыхПолей, СтруктураСложныхПолей);

//	//ТаблицаСубподрядов = РезультатЗапросаПоСубподрядам.Выгрузить();
//	//ТаблицаСубподрядов.Колонки.Добавить("СчетРасходовБУ");
//	//ТаблицаСубподрядов.Колонки.Добавить("СхемаРеализации");
//	//ТаблицаСубподрядов.Колонки.Добавить("СчетДоходовБУ");
//	//ТаблицаСубподрядов.Колонки.Добавить("СубконтоДоходовБУ1");
//	//ТаблицаСубподрядов.Колонки.Добавить("СубконтоДоходовБУ2");
//	//ТаблицаСубподрядов.Колонки.Добавить("СубконтоДоходовБУ3");
//	//ТаблицаСубподрядов.Колонки.Добавить("НалоговоеНазначение");
//	//ТаблицаСубподрядов.Колонки.Добавить("ВидНалоговойДеятельности");
//	//ТаблицаСубподрядов.Колонки.Добавить("ВидДеятельностиНДС");
//	//ТаблицаСубподрядов.Колонки.Добавить("Амортизируется");
//	//
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.СхемыРеализации.Услуги.СчетСебестоимости,"СчетРасходовБУ");
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.СхемыРеализации.Услуги,"СхемаРеализации");
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.СхемыРеализации.Услуги.СчетДоходов,"СчетДоходовБУ");
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.СхемыРеализации.Услуги.СубконтоДоходов1,"СубконтоДоходовБУ1");
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.СхемыРеализации.Услуги.СубконтоДоходов2,"СубконтоДоходовБУ2");
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.СхемыРеализации.Услуги.СубконтоДоходов3,"СубконтоДоходовБУ3");

//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.НалоговыеНазначенияАктивовИЗатрат.ХозДеятельность,"НалоговоеНазначение");
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.НалоговыеНазначенияАктивовИЗатрат.ХозДеятельность.ВидНалоговойДеятельности,"ВидНалоговойДеятельности");
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(Справочники.НалоговыеНазначенияАктивовИЗатрат.ХозДеятельность.ВидДеятельностиНДС,"ВидДеятельностиНДС");
//	//ТаблицаСубподрядов.ЗаполнитьЗначения(ложь,"Амортизируется");	
//	//
//	//Если НЕ УчитыватьНДС Тогда
//	//	// для регламентного учета считаем НДС
//	//	ТаблицаСубподрядов.ЗаполнитьЗначения(Перечисления.СтавкиНДС.БезНДС, "СтавкаНДС");
//	//	ТаблицаСубподрядов.ЗаполнитьЗначения(0                            , "НДС");
//	//КонецЕсли;

//	//НалоговыйУчет.ДобавитьКолонкиТоваровРегл(ТаблицаСубподрядов, СтруктураШапкиДокумента, ПогрешностиОкругления, Ложь);
//   	//чтобы не брало дважды
//	//ОбщегоНазначения.ЗагрузитьВТаблицуЗначений(ТаблицаСубподрядов,ТаблицаПоУслугам);
//	
//КонецПроцедуры

//Процедура ЗаполнитьСчетаУчетаРасчетов(СчетаУчета = неопределено) Экспорт
//	
//    Если СчетаУчета = неопределено Тогда
//		СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(Организация, Контрагент, ДоговорКонтрагента);
//	КонецЕсли;
//	
//	
//	
//	Если ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.Бартерный Тогда
//		СчетУчетаРасчетовСКонтрагентом = СчетаУчета.СчетРасчетовПокупателяПриБартере;
//		СчетУчетаРасчетовПоАвансам     = СчетаУчета.СчетАвансовПокупателяПриБартере;
//	Иначе
//		СчетУчетаРасчетовСКонтрагентом = СчетаУчета.СчетРасчетовПокупателя;
//		СчетУчетаРасчетовПоАвансам     = СчетаУчета.СчетАвансовПокупателя;
//	КонецЕсли;
//	
//	СчетУчетаРасчетовПоТаре          = СчетаУчета.СчетУчетаТарыПокупателя;
//	СчетУчетаРасчетовПоТареПоАвансам = СчетаУчета.СчетАвансовПоТареПокупателя;
//		
//	СчетУчетаНДС 					 = СчетаУчета.СчетУчетаНДСПродаж;
//	СчетУчетаНДСПодтвержденный  	 = СчетаУчета.СчетУчетаНДСПродажПодтвержденный;

//КонецПроцедуры // ЗаполнитьСчетаУчетаРасчетов()
// 
//Процедура ЗаполнитьПоПоступлению(ИмяТабЧасти, Режим, Основание = Неопределено) Экспорт

//	Если Основание = Неопределено Тогда
//		ФормаПоступления = Документы.ИмпПоступлениеТМЦзаказчика.ПолучитьФормуВыбора();
//		ФормаПоступления.Заголовок = НСтр("ru='Выберите документ поступления для заполнения документа реализации';uk='Виберіть документ надходження для заповнення документа реалізації'");
//		ФормаПоступления.РежимВыбора = Истина;
//		ФормаПоступления.Отбор.Организация.Значение = Организация;
//		ФормаПоступления.Отбор.Организация.Использование = Истина;
//		Поступление = ФормаПоступления.ОткрытьМодально();
//	Иначе
//		Поступление = Основание;
//	КонецЕсли;

//	Если ОбщегоНазначения.ЗначениеНеЗаполнено(Поступление) Тогда
//		Возврат;
//	КонецЕсли;

//	ТабЧасть = ЭтотОбъект["СписаниеТМЦзаказчика"];

//	Если ТабЧасть.Количество() > 0 И Режим = "Заполнить" Тогда

//		#Если Клиент Тогда
//		ТекстВопроса = НСтр("ru='Перед заполнением табличная часть будет очищена. Заполнить?';uk='Перед заповненням таблична частина буде очищена. Заповнити?'");
//		Ответ        = Вопрос(ТекстВопроса, РежимДиалогаВопрос.ДаНет, , КодВозвратаДиалога.Да, Метаданные().Представление());

//		Если Ответ = КодВозвратаДиалога.Нет Тогда
//			Возврат;
//		КонецЕсли; 
//		#КонецЕсли

//		ТабЧасть.Очистить();

//	КонецЕсли;

//	Запрос = Новый Запрос();
//	Запрос.УстановитьПараметр("Поступление", Поступление);
//	Запрос.Текст = 
//"
//	|ВЫБРАТЬ
//	|	ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика.НомерСтроки,          
//	|	ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика.Номенклатура,
//	|	ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика.Количество" +?(ИмяТабЧасти = "МатериалыЗаказчика",",
//	//|	ПоступлениеТоваровУслугТовары.КоличествоМест,
//	|	ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика.ЕдиницаИзмерения,
//	|	ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика.Цена,
//	|	ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика.Сумма,
//	|	ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика.Коэффициент", "") + "
//	//|	ПоступлениеТоваровУслугТовары.СтавкаНДС", "") + "                         
//	|ИЗ
//	|	Документ.ИмпПоступлениеТМЦзаказчика."+ИмяТабЧасти + " КАК ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика
//	|
//	|ГДЕ
//	|	ИмпПоступлениеТМЦзаказчикаМатериалыЗаказчика.Ссылка = &Поступление";
//	
//	ВыборкаТоваров = Запрос.Выполнить().Выбрать();

//	Пока ВыборкаТоваров.Следующий() Цикл

//		СтрокаТЧ = ТабЧасть.Добавить();

//		СтрокаТЧ.Номенклатура        = ВыборкаТоваров.Номенклатура;
//		СтрокаТЧ.Количество          = ВыборкаТоваров.Количество;
//		
//		Если ИмяТабЧасти = "МатериалыЗаказчика" Тогда

//			СтрокаТЧ.ЕдИзм    = ВыборкаТоваров.ЕдиницаИзмерения;
//		    СтрокаТЧ.Склад = Поступление.Склад;
//			СтрокаТЧ.Цена =  ВыборкаТоваров.Цена;
//			СтрокаТЧ.Сумма =  ВыборкаТоваров.Сумма;
//		КонецЕсли;
//		
//		ПодсчитатьОстатокПоНоменклатуреДляСтроки(СтрокаТЧ);
//        
//	КонецЦикла;

//КонецПроцедуры // КоманднаяПанельТоварыДействиеСкопироватьСостав()

//Процедура ПодсчитатьОстатокПоНоменклатуреДляСтроки(ТекСтр, Счет = неопределено) экспорт
//	
//	Запрос = новый запрос;
//	запрос.Текст =
//	"ВЫБРАТЬ
//	|	ХозрасчетныйОстатки.Счет,
//	|	ЕСТЬNULL(ХозрасчетныйОстатки.КоличествоОстаток,0) КАК КоличествоОстаток
//	|ИЗ
//	|	РегистрБухгалтерии.Хозрасчетный.Остатки(
//	|		&Период,
//	|		Счет В (&СписокСчет),
//	|		&ПорядокСубконто,
//	|		Организация = &Организация
//	|			И Субконто1 = &Номенклатура) КАК ХозрасчетныйОстатки";
//	запрос.УстановитьПараметр("Период",Дата - 1);
//	СписокСчет = новый СписокЗначений;
//	Если Счет = неопределено тогда
//		СписокСчет.Добавить(ПланыСчетов.Хозрасчетный.МатериалыЗаказчикаПринятыеДляВыполненияСМРпоСК);
//		СписокСчет.Добавить(ПланыСчетов.Хозрасчетный.ОборудованиеЗаказчикаПринятоеДляВыполненияСМРпоСК);
//	Иначе
//		СписокСчет.Добавить(Счет);
//	КонецЕсли;	
//	запрос.УстановитьПараметр("СписокСчет",СписокСчет);
//	ПорядокСубконто = новый Массив;
//	ПорядокСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Номенклатура);
//	запрос.УстановитьПараметр("ПорядокСубконто",ПорядокСубконто);
//	запрос.УстановитьПараметр("Организация",Организация);
//	запрос.УстановитьПараметр("Номенклатура",ТекСтр.Номенклатура);
//	
//	Выборка = запрос.Выполнить().Выбрать();
//	
//	Если Выборка.Следующий() тогда 
//		 ТекСтр.Остаток = Выборка.КоличествоОстаток;
//		 ТекСтр.Счет = Выборка.Счет;
//	Иначе	
//	     ТекСтр.Остаток = 0;
//	КонецЕсли;
//	
//	
//КонецПроцедуры

//Процедура ЗаполнитьПоОстаткам() экспорт

//	Если СписаниеТМЦзаказчика.Количество() > 0 Тогда

//		#Если Клиент Тогда
//		ТекстВопроса = НСтр("ru='Перед заполнением табличная часть будет очищена. Заполнить?';uk='Перед заповненням таблична частина буде очищена. Заповнити?'");
//		Ответ        = Вопрос(ТекстВопроса, РежимДиалогаВопрос.ДаНет, , КодВозвратаДиалога.Да, Метаданные().Представление());

//		Если Ответ = КодВозвратаДиалога.Нет Тогда
//			Возврат;
//		КонецЕсли; 
//		#КонецЕсли

//		СписаниеТМЦзаказчика.Очистить();

//	КонецЕсли;
//	
//	//30.08.13 Тептюк Добавил заполнение суммы и цены
//	Запрос = новый запрос;
//	запрос.Текст =
//	"ВЫБРАТЬ
//	|	ХозрасчетныйОстатки.Счет,
//	|	ХозрасчетныйОстатки.Субконто2 КАК Склад,
//	|	ХозрасчетныйОстатки.Субконто3 КАК Номенклатура,
//	|	ЕСТЬNULL(ХозрасчетныйОстатки.КоличествоОстатокДт, 0) КАК КоличествоОстатокДт,
//	|	ХозрасчетныйОстатки.СуммаОстаток КАК Сумма
//	|ИЗ
//	|	РегистрБухгалтерии.Хозрасчетный.Остатки(
//	|			&Период,
//	|			Счет В (&СписокСчетов),
//	|			&ПорядокСубконто,
//	|			Организация = &Организация
//	|				И Субконто1 = &Заказчик) КАК ХозрасчетныйОстатки";
//	
//	запрос.УстановитьПараметр("Период",Дата - 1);
//	СписокСчет = новый СписокЗначений;
//	СписокСчет.Добавить(ПланыСчетов.Хозрасчетный.МатериалыЗаказчикаПринятыеДляВыполненияСМРпоСК);
//	СписокСчет.Добавить(ПланыСчетов.Хозрасчетный.ОборудованиеЗаказчикаПринятоеДляВыполненияСМРпоСК);
//	запрос.УстановитьПараметр("СписокСчетов",СписокСчет);
//	ПорядокСубконто = новый Массив;
//	ПорядокСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Контрагенты);
//	ПорядокСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Склады);
//	ПорядокСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Номенклатура);
//	запрос.УстановитьПараметр("ПорядокСубконто",ПорядокСубконто);
//	запрос.УстановитьПараметр("Заказчик",Контрагент);
//	запрос.УстановитьПараметр("Организация",Организация);
//	
//	Выборка = запрос.Выполнить().Выбрать();
//	Пока Выборка.Следующий() Цикл
//		новСтр = СписаниеТМЦзаказчика.Добавить();
//		новСтр.Номенклатура = Выборка.Номенклатура;
//		новСтр.Склад = Выборка.Склад;
//		Если Не ОбщегоНазначения.ЗначениеНеЗаполнено(Выборка.Номенклатура) тогда
//			новСтр.ЕдИзм = Выборка.Номенклатура.БазоваяЕдиницаИзмерения;
//		КонецЕсли;
//		новСтр.Остаток = Выборка.КоличествоОстатокДт;
//		новСтр.Количество = Выборка.КоличествоОстатокДт;
//		новСтр.Счет = Выборка.Счет;
//	//30.08.13 Тептюк Добавил заполнение суммы и цены
//		новСтр.Сумма=Выборка.Сумма;
//		новСтр.Цена=новСтр.Сумма/новСтр.Количество;
//	КонецЦикла;	
//	//30.08.13 Тептюк Добавил заполнение суммы и цены 
//	
//	
//КонецПроцедуры	

//Функция ЕстьНезаполненные() экспорт
//	
//	Флаг = Ложь;
//	Если ОбщегоНазначения.ЗначениеНеЗаполнено(Организация) тогда
//		Сообщить(НСтр("ru='Не заполнено поле ""Организация""';uk='Не заповнене поле ""Організація""'"));
//		Флаг = Истина;
//	КонецЕсли;	
//	Если ОбщегоНазначения.ЗначениеНеЗаполнено(НоменклатурнаяГруппа) тогда
//		Сообщить(НСтр("ru=""Не заполнено поле ""Объект строительства"""";uk=""Не заповнене поле ""Об'єкт будівництва"""""));
//		Флаг = Истина;
//	КонецЕсли;	
//	Если ОбщегоНазначения.ЗначениеНеЗаполнено(ДоговорКонтрагента) тогда
//		Сообщить(НСтр("ru='Не заполнено поле ""Договор""';uk='Не заповнене поле ""Договір""'"));
//		Флаг = Истина;
//	КонецЕсли;	
//	Если ОбщегоНазначения.ЗначениеНеЗаполнено(Контрагент) тогда
//		Сообщить(НСтр("ru='Не заполнено поле ""Заказчик""';uk='Не заповнене поле ""Замовник""'"));
//		Флаг = Истина;
//	КонецЕсли;	
//	
//	Для каждого Стр из СписаниеТМЦзаказчика Цикл
//		Если ОбщегоНазначения.ЗначениеНеЗаполнено(Стр.Номенклатура) тогда
//			Сообщить(НСтр("ru='Не заполнено поле ""Номенклатура"" в строке ';uk='Не заповнене поле ""Номенклатура"" у рядку'") + Стр.НомерСтроки + НСтр("ru=' закладка ""Списание ТМЦ""';uk=' закладка ""Списання ТМЦ""'"));
//			Флаг = Истина;
//		КонецЕсли;	
//		Если ОбщегоНазначения.ЗначениеНеЗаполнено(Стр.Склад) тогда
//			Сообщить(НСтр("ru='Не заполнено поле ""Склад"" в строке ';uk='Не заповнене поле ""Склад"" у рядку'") + Стр.НомерСтроки + НСтр("ru=' закладка ""Списание ТМЦ""';uk=' закладка ""Списання ТМЦ""'"));
//			Флаг = Истина;
//		КонецЕсли;	
//		Если ОбщегоНазначения.ЗначениеНеЗаполнено(Стр.Счет) тогда
//			Сообщить(НСтр("ru='Не заполнено поле ""Счет"" в строке ';uk='Не заповнене поле ""Рахунок"" у рядку'") + Стр.НомерСтроки + НСтр("ru=' закладка ""Списание ТМЦ""';uk=' закладка ""Списання ТМЦ""'"));
//			Флаг = Истина;
//		КонецЕсли;	
//		Если ОбщегоНазначения.ЗначениеНеЗаполнено(Стр.Количество) тогда
//			Сообщить(НСтр("ru='Не заполнено поле ""Количество"" в строке ';uk='Не заповнене поле ""Кількість"" у рядку'") + Стр.НомерСтроки + НСтр("ru=' закладка ""Списание ТМЦ""';uk=' закладка ""Списання ТМЦ""'"));
//			Флаг = Истина;
//		КонецЕсли;	
//	КонецЦикла;
//	
//	возврат Флаг;
//	
//КонецФункции	

////ИМП Куцый 02.07.13 Для  Собственные ТМЦ РеализацияСтрРабУслуг

//// Процедура заполняет счета учета по бухгалтерскому и налоговому учету.
////
//Процедура ЗаполнитьСчетаУчетаВСтрокеТабЧастиНаОсновании(СтрокаТЧ, ИмяТабЧасти, ЗаполнятьБУ, ЗаполнятьНУ) Экспорт

//	
//мСчет=0;
//мНалоговоеНазначение=0;
//мНалоговоеНазначениеДоходовИЗатрат=0;

//	
//	
//	СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Организация, СтрокаТЧ, Склад);

//		//НоваяСтрока = Материалы.Загрузить();

//	Если ЗаполнятьБУ = Истина Тогда
//		мСчет=СчетаУчета.СчетУчетаБУ;
//		//СтрокаТЧ.Счет = СчетаУчета.СчетУчетаБУ;
//	ИначеЕсли ЗаполнятьБУ = Ложь Тогда
//		мСчет = ПланыСчетов.Хозрасчетный.ПустаяСсылка();
//	КонецЕсли;

//	Если ЗаполнятьНУ Тогда
//		
//		мНалоговоеНазначение = СчетаУчета.НалоговоеНазначение;
//		мНалоговоеНазначениеДоходовИЗатрат = СчетаУчета.НалоговоеНазначениеДоходовИЗатрат;
//		
//	Иначе
//		
//		мНалоговоеНазначение = Справочники.НалоговыеНазначенияАктивовИЗатрат.ПустаяСсылка();
//		мНалоговоеНазначениеДоходовИЗатрат = Справочники.НалоговыеНазначенияАктивовИЗатрат.ПустаяСсылка();
//		
//	КонецЕсли;

//КонецПроцедуры // ЗаполнитьСчетаУчетаВСтрокеТабЧасти()

//Процедура ЗаполнитьСчетаУчетаВСтрокеТабЧасти(СтрокаТЧ, ИмяТабЧасти, ЗаполнятьБУ, ЗаполнятьНУ) Экспорт

//	СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Организация, СтрокаТЧ.Номенклатура, Склад);

//	Если ЗаполнятьБУ = Истина Тогда
//		СтрокаТЧ.Счет = СчетаУчета.СчетУчетаБУ;
//	ИначеЕсли ЗаполнятьБУ = Ложь Тогда
//		СтрокаТЧ.Счет = ПланыСчетов.Хозрасчетный.ПустаяСсылка();
//	КонецЕсли;

//	Если ЗаполнятьНУ Тогда
//		
//		СтрокаТЧ.НалоговоеНазначение = СчетаУчета.НалоговоеНазначение;
//		СтрокаТЧ.НалоговоеНазначениеДоходовИЗатрат = СчетаУчета.НалоговоеНазначениеДоходовИЗатрат;
//		
//	Иначе
//		
//		СтрокаТЧ.НалоговоеНазначение = Справочники.НалоговыеНазначенияАктивовИЗатрат.ПустаяСсылка();
//		СтрокаТЧ.НалоговоеНазначениеДоходовИЗатрат = Справочники.НалоговыеНазначенияАктивовИЗатрат.ПустаяСсылка();
//		
//	КонецЕсли;

//КонецПроцедуры // ЗаполнитьСчетаУчетаВСтрокеТабЧасти()

//Процедура ОбработкаУдаленияПроведения(Отказ)
//	
//	ОбщегоНазначения.УдалитьДвиженияРегистратора(ЭтотОбъект,Отказ,РучнаяКорректировка);

//КонецПроцедуры

//// Процедура формирует таблицы документа.
////
//Процедура ПодготовитьТаблицыДокументаСобственныеТМЦ(СтруктураШапкиДокумента, ТаблицаМатериалов, Отказ, Заголовок) Экспорт
//	
//	СтруктураПолей = Новый Структура();
//	СтруктураПолей.Вставить("НомерСтроки"				, "НомерСтроки");
//	СтруктураПолей.Вставить("Номенклатура"				, "Номенклатура");
//	СтруктураПолей.Вставить("Услуга"					, "Номенклатура.Услуга");
//	СтруктураПолей.Вставить("БланкСтрогогоУчета"		, "Номенклатура.БланкСтрогогоУчета");
//	СтруктураПолей.Вставить("Количество"				, "Количество * Коэффициент");
//	СтруктураПолей.Вставить("СчетУчетаБУ"				, "Счет");
//	
//	СтруктураПолей.Вставить("НалоговоеНазначение"		, "НалоговоеНазначение");
//	СтруктураПолей.Вставить("ВидДеятельностиНДС"		, "НалоговоеНазначение.ВидДеятельностиНДС");
//	СтруктураПолей.Вставить("ДокументОприходования"		, "ДокументОприходования");
//	СтруктураПолей.Вставить("Себестоимость"		   		, "Себестоимость");
//	СтруктураПолей.Вставить("СебестоимостьНУ"		   	, "СебестоимостьНУ");
//	
//	Если СчетаУчетаЗатратВТаблице Тогда
//		СтруктураПолей.Вставить("КорСчетСписанияБУ"      , "СчетЗатрат");
//		СтруктураПолей.Вставить("КорСубконтоСписанияБУ1" , "СтатьяЗатрат");
//		СтруктураПолей.Вставить("КорСубконтоСписанияБУ2" , "НоменклатурнаяГруппа"); 				
//		СтруктураПолей.Вставить("КорСубконтоСписанияБУ3" , "Ссылка.ПодразделениеОрганизации");
//		СтруктураПолей.Вставить("НалоговоеНазначениеНовое" , "НалоговоеНазначениеДоходовИЗатрат");
//    КонецЕсли;
//	
//	РезультатЗапросаПоМатериалам = ОбщегоНазначения.СформироватьЗапросПоТабличнойЧасти(ЭтотОбъект, "Материалы", СтруктураПолей);

//	// Подготовим таблицу товаров для проведения.
//	ТаблицаМатериалов = ПодготовитьТаблицуТоваров(РезультатЗапросаПоМатериалам, СтруктураШапкиДокумента);
//	
//	Если ВидОперации = Перечисления.ВидыОперацийТребованиеНакладная.Материалы Тогда
//		
//		СтруктураПолей = Новый Структура();
//		СтруктураПолей.Вставить("НомерСтроки"      , "НомерСтроки");
//		СтруктураПолей.Вставить("Номенклатура"     , "Номенклатура");
//		СтруктураПолей.Вставить("Количество"       , "Количество  * Коэффициент");
//		СтруктураПолей.Вставить("СчетУчетаБУ"      , "Счет");
//		СтруктураПолей.Вставить("КорСчетСписанияБУ", "СчетПередачи");
//		
//		
//		//РезультатЗапросаПоМатериалам = ОбщегоНазначения.СформироватьЗапросПоТабличнойЧасти(ЭтотОбъект, "МатериалыЗаказчика", СтруктураПолей);
//		// Подготовим таблицу товаров для проведения.
//		//проверить ТаблицаДавальческихМатериалов = ПодготовитьТаблицуМатериалыЗаказчика(РезультатЗапросаПоМатериалам, СтруктураШапкиДокумента);
//		
//	КонецЕсли;
//	
//КонецПроцедуры

//Функция ПодготовитьТаблицуТоваров(РезультатЗапросаПоТоварам, СтруктураШапкиДокумента)

//	ТаблицаМатериалов = РезультатЗапросаПоТоварам.Выгрузить();

////	ТаблицаМатериалов.Колонки.Добавить("ДокументОприходования");
//	ТаблицаМатериалов.Колонки.Добавить("Регистратор");
//	ТаблицаМатериалов.Колонки.Добавить("Склад");
//	ТаблицаМатериалов.Колонки.Добавить("Организация");
//	ТаблицаМатериалов.Колонки.Добавить("ДоговорКонтрагента");
//	ТаблицаМатериалов.Колонки.Добавить("Валюта");
//	ТаблицаМатериалов.Колонки.Добавить("ВходящийНДС");
//	ТаблицаМатериалов.Колонки.Добавить("КоэффОплаты");
//	
//	КоэффОплаты      = 1;
//	
//	ТаблицаМатериалов.ЗаполнитьЗначения(КоэффОплаты,   							"КоэффОплаты");
//	ТаблицаМатериалов.ЗаполнитьЗначения(ЭтотОбъект,    							"Регистратор");
//	ТаблицаМатериалов.ЗаполнитьЗначения(СтруктураШапкиДокумента.Склад,      	"Склад");
//	ТаблицаМатериалов.ЗаполнитьЗначения(СтруктураШапкиДокумента.Организация,	"Организация");
//	Если НЕ СчетаУчетаЗатратВТаблице  Тогда
//		ТаблицаМатериалов.Колонки.Добавить("КорСчетСписанияБУ");
//		ТаблицаМатериалов.Колонки.Добавить("КорСубконтоСписанияБУ1");
//		ТаблицаМатериалов.Колонки.Добавить("КорСубконтоСписанияБУ2");
//		ТаблицаМатериалов.Колонки.Добавить("КорСубконтоСписанияБУ3"); 
//		ТаблицаМатериалов.Колонки.Добавить("НалоговоеНазначениеНовое"); 
//		
//		ТаблицаМатериалов.ЗаполнитьЗначения(СчетЗатрат,    				"КорСчетСписанияБУ");
//		ТаблицаМатериалов.ЗаполнитьЗначения(Субконто1,     				"КорСубконтоСписанияБУ1");
//		ТаблицаМатериалов.ЗаполнитьЗначения(Субконто2,     				"КорСубконтоСписанияБУ2");
//		ТаблицаМатериалов.ЗаполнитьЗначения(Субконто3,     				"КорСубконтоСписанияБУ3");
//		//проверить ТаблицаМатериалов.ЗаполнитьЗначения(НалоговоеНазначениеДоходовИЗатрат,"НалоговоеНазначениеНовое");
//		
//	КонецЕсли;
//	
//	ТаблицаМатериалов.Колонки.Добавить("ХарактерЗатрат");
//	Для Каждого Строка Из ТаблицаМатериалов Цикл
//		
//		// заполним ХарактерЗатрат, НалоговоеНазначениеНовое
//		
//		НалоговыйУчет.ОпределениеАналитикиНалоговогоУчетаВПроводкахДляЗатрат(Строка, Строка.КорСчетСписанияБУ, Строка.ХарактерЗатрат,
//														       	Строка.НалоговоеНазначениеНовое, ,                                                   
//																Строка.НалоговоеНазначение, Строка.НалоговоеНазначениеНовое, "КорСубконтоСписанияБУ",Дата);
//		
//	КонецЦикла;	
//	
//	Возврат ТаблицаМатериалов;

//КонецФункции // ПодготовитьТаблицуТоваров()

//Процедура ПроверитьТабЧатьМатериалыПоСтрочно(ТаблицаМатериалов, СтруктураШапкиДокумента, Отказ, Заголовок)
//	
//	ЭтоОборудование = (СтруктураШапкиДокумента.ВидОперации = Перечисления.ВидыОперацийТребованиеНакладная.Оборудование);
//	НеоблагаемыйВНД = Справочники.ВидыНалоговойДеятельности.НеОблагаемая;
//	
//	Для каждого СтрокаТЧ Из ТаблицаМатериалов Цикл

//		Если НЕ ЭтоОборудование Тогда
//			СтрокаНачалаСообщенияОбОшибке = Локализация.СтрШаблон(НСтр("ru='В строке номер ""¤1¤"" табличной части ""Материалы"": ';uk='У рядку номер ""¤1¤"" табличної частини ""Матеріали"": '"), СокрЛП(СтрокаТЧ.НомерСтроки));
//		Иначе
//			СтрокаНачалаСообщенияОбОшибке = Локализация.СтрШаблон(НСтр("ru='В строке номер ""¤1¤"" табличной части ""Оборудование"": ';uk='У рядку номер ""¤1¤"" табличної частини ""Устаткування"": '"), СокрЛП(СтрокаТЧ.НомерСтроки));
//		КонецЕсли;	
//		
//		Если НЕ Отказ  
//			 И  СтруктураШапкиДокумента.ЕстьНалогНаПрибыль Тогда
//		
//			ХарактерЗатрат = СтрокаТЧ.ХарактерЗатрат;
//			Если НЕ ЗначениеЗаполнено(СтрокаТЧ.НалоговоеНазначениеНовое) Тогда
//				Если СтруктураШапкиДокумента.СчетаУчетаЗатратВТаблице И ХарактерЗатрат = "Затраты" Тогда
//					СтрокаСообщения = СтрокаНачалаСообщенияОбОшибке + НСтр("ru='не указано ""Налоговое назначение затрат""!';uk='не зазначено ""Податкове призначення витрат""!'");
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаСообщения, Отказ, Заголовок);
//				ИначеЕсли СтруктураШапкиДокумента.СчетаУчетаЗатратВТаблице И ХарактерЗатрат = "Строительство" Тогда
//					СтрокаСообщения = СтрокаНачалаСообщенияОбОшибке + НСтр("ru='не указано налоговое назначение для объекта строительства или НМА!';uk=""не зазначено податкове призначення для об'єкта будівництва або НМА!""");
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаСообщения, Отказ, Заголовок);
//				ИначеЕсли СтруктураШапкиДокумента.СчетаУчетаЗатратВТаблице И ХарактерЗатрат = "Производство" Тогда
//					СтрокаСообщения = СтрокаНачалаСообщенияОбОшибке + НСтр("ru='не указано налоговое назначение для номенклатурной группы!';uk='не зазначено податкове призначення для номенклатурної групи!'");
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаСообщения, Отказ, Заголовок);			
//				ИначеЕсли СтруктураШапкиДокумента.СчетаУчетаЗатратВТаблице И ХарактерЗатрат = "РБП" Тогда
//					СтрокаСообщения = СтрокаНачалаСообщенияОбОшибке + НСтр("ru='не указано налоговое назначение для расходов будущих периодов!';uk='не зазначено податкове призначення для витрат майбутніх періодів!'");
//					ОбщегоНазначения.ОшибкаПриПроведении(СтрокаСообщения, Отказ, Заголовок);			
//				Иначе
//					//Для ТЗР определить НалоговоеНазначение можно только в строке, даже если счет затрат в указывается шапке
//					СтрокаСообщения = НСтр("ru='Невозможно определить налоговое назначение затрат для указанного счета затрат!';uk='неможливо визначити податкове призначення витрат для вказанного рахунку витрат!'");
//					ОбщегоНазначения.СообщитьИнформациюПользователю(СтрокаСообщения);			
//				КонецЕсли;
//			КонецЕсли;
//			 
//			// нельзя по НДС указывать нехоз. деятельность, а по НП - хоз. деятельность
//			Если НЕ Отказ  
//				И  СтруктураШапкиДокумента.ЕстьНДС Тогда
//				
//				НехозДеятельностьНДС = (СтрокаТЧ.НалоговоеНазначение = Справочники.НалоговыеНазначенияАктивовИЗатрат.НДС_НеоблагаемаяНеХозДеятельность);
//				НехозДеятельностьНКУ = (СтрокаТЧ.НалоговоеНазначениеНовое = Справочники.НалоговыеНазначенияАктивовИЗатрат.НКУ_НеХозДеятельность);
//				
//				Если НЕ СтрокаТЧ.НалоговоеНазначение = СтрокаТЧ.НалоговоеНазначениеНовое
//					  И НехозДеятельностьНДС <> НехозДеятельностьНКУ Тогда 
//					СтрокаСообщения = СтрокаНачалаСообщенияОбОшибке + НСтр("ru=' ошибочно указано нехозяйственное налоговое назначение (НДС) и одновременно хозяйственную деятельность по затратам (и наоборот)!';uk=' помилково зазначено негосподарське податкове призначення (ПДВ) і одночасно господарську діяльність по витратам (та навпаки)!'");
//					ОбщегоНазначения.СообщитьИнформациюПользователю(СтрокаСообщения);
//				КонецЕсли;
//				
//			КонецЕсли;
//		КонецЕсли;
//		
//		Если НЕ Отказ  
//			 И  СтруктураШапкиДокумента.ЕстьНДС Тогда
//		
//			ХарактерЗатрат = СтрокаТЧ.ХарактерЗатрат;
//			
//			Если  ХарактерЗатрат = "ОПЗ"
//				И СтрокаТЧ.НалоговоеНазначение = Справочники.НалоговыеНазначенияАктивовИЗатрат.НДС_НеоблагаемаяНеХозДеятельность Тогда
//			
//				СтрокаСообщения = СтрокаНачалаСообщенияОбОшибке + НСтр("ru=' указано нехозяйственное налоговое назначение. Списание на счет ОПЗ - невозможно!';uk=' зазначене негосподарське податкове призначення. Списання на рахунок ЗВВ - неможливе!'");	
//				
//				ОбщегоНазначения.ОшибкаПриПроведении(СтрокаСообщения, Отказ, Заголовок);
//			
//			КонецЕсли;
//			
//		КонецЕсли;
//		
//	КонецЦикла;
//	
//КонецПроцедуры

//// Процедура проверяет правильность заполнения реквизитов документа
////
//Процедура ПроверкаРеквизитовТЧ(ТаблицаМатериалов, СтруктураШапкиДокумента, Отказ, Заголовок) Экспорт

//	РеквизитыТабМат = "Номенклатура, Количество, ЕдиницаИзмерения, Счет" + ?(СтруктураШапкиДокумента.СчетаУчетаЗатратВТаблице, " ,СчетЗатрат, НоменклатурнаяГруппа, СтатьяЗатрат", "");
//	
//	Если СтруктураШапкиДокумента.ЕстьНДС Тогда
//		РеквизитыТабМат = РеквизитыТабМат + ", НалоговоеНазначение";
//	КонецЕсли;
//	
//	ЗаполнениеДокументов.ПроверитьЗаполнениеТабличнойЧасти(ЭтотОбъект, "Материалы", Новый Структура(РеквизитыТабМат), Отказ, Заголовок);
//	
//	// Здесь услуг и бланков быть не должно.
//	УправлениеЗапасами.ПроверитьЧтоНетУслуг(ЭтотОбъект, "Материалы", ТаблицаМатериалов, Отказ, Заголовок);
//	УправлениеЗапасами.ПроверитьЧтоНетБланковСтрогогоУчета(ЭтотОбъект, "Материалы", ТаблицаМатериалов, Отказ, Заголовок);
//	
//	// Проверим что нет услуг
//	УправлениеПроизводством.НепроверятьРеквизитыПоТипуУчета(ЭтотОбъект, РеквизитыТабМат, мСтрокаРеквизитыУпрУчета, мСтрокаРеквизитыБухУчета, мСтрокаРеквизитыНалУчета, "Материалы");
//	
//	ПроверитьТабЧатьМатериалыПоСтрочно(ТаблицаМатериалов, СтруктураШапкиДокумента, Отказ, Заголовок);
//	
//	Если НЕ Отказ Тогда	
//		ЗаполнениеДокументов.ПроверитьСоответствиеАналитикиЗатратНалоговомуНазначению(ЭтотОбъект, "Материалы", Отказ, Заголовок, СчетаУчетаЗатратВТаблице,Дата);
//		
//	КонецЕсли;

//	
//КонецПроцедуры // ПроверкаРеквизитовТЧ()

//// Функция списания материалов с регистра ТоварыНаСкладе
////
//Процедура ДвиженияПоРегистрам(СтруктураШапкиДокумента, ТаблицаМатериалов, Отказ, Заголовок, РежимПроведения)

//	УправлениеЗапасамиПартионныйУчет.ДвижениеПартийТоваров(ТаблицаМатериалов, Отказ);
//	
//	Если ВидОперации = Перечисления.ВидыОперацийТребованиеНакладная.Материалы Тогда
//		УправлениеЗапасамиПартионныйУчет.ДвижениеПартийТоваров(Отказ);
//	КонецЕсли;
//	
//КонецПроцедуры;
////ИМП Куцый 02.07.13 Для  Собственные ТМЦ РеализацияСтрРабУслуг

//////////////////////////////////////////////////////////////////////////////////
//// ОПЕРАТОРЫ ОСНОВНОЙ ПРОГРАММЫ

//мВалютаРегламентированногоУчета = Константы.ВалютаРегламентированногоУчета.Получить();