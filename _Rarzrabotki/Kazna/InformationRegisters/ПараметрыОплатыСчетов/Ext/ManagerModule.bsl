Функция ПолучитьПроцентОплаты(Контрагент, СтатьяДДС)Экспорт  
	Если НЕ ЗначениеЗаполнено(Контрагент) ИЛИ Не ЗначениеЗаполнено(СтатьяДДС) Тогда
		Возврат 0;
	КонецЕсли;
	
	Запрос = Новый Запрос;
	Запрос.Текст=   "ВЫБРАТЬ
	                |	ПараметрыОплатыСчетов.ПроцентОплаты,
	                |	ПараметрыОплатыСчетов.Контрагент,
	                |	ПараметрыОплатыСчетов.СтатьяДДС,
	                |	ВЫБОР
	                |		КОГДА ПараметрыОплатыСчетов.Контрагент = &Контрагент
	                |				И ПараметрыОплатыСчетов.СтатьяДДС = &СтатьяДДС
	                |			ТОГДА 1
	                |		КОГДА ПараметрыОплатыСчетов.Контрагент = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)
	                |				И ПараметрыОплатыСчетов.СтатьяДДС = &СтатьяДДС
	                |			ТОГДА 3
	                |		КОГДА ПараметрыОплатыСчетов.Контрагент = &Контрагент
	                |				И ПараметрыОплатыСчетов.СтатьяДДС = ЗНАЧЕНИЕ(Справочник.СтатьиДвиженияДенежныхСредств.ПустаяСсылка)
	                |			ТОГДА 2
	                |		КОГДА ПараметрыОплатыСчетов.Контрагент = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)
	                |				И ПараметрыОплатыСчетов.СтатьяДДС = ЗНАЧЕНИЕ(Справочник.СтатьиДвиженияДенежныхСредств.ПустаяСсылка)
	                |			ТОГДА 5
	                |		ИНАЧЕ 9
	                |	КОНЕЦ КАК Приоритет
	                |ИЗ
	                |	РегистрСведений.ПараметрыОплатыСчетов КАК ПараметрыОплатыСчетов
	                |ГДЕ
	                |	(ПараметрыОплатыСчетов.СтатьяДДС = &СтатьяДДС
	                |			ИЛИ ПараметрыОплатыСчетов.Контрагент = &Контрагент
	                |			ИЛИ ПараметрыОплатыСчетов.СтатьяДДС = ЗНАЧЕНИЕ(Справочник.СтатьиДвиженияДенежныхСредств.ПустаяСсылка)
	                |			ИЛИ ПараметрыОплатыСчетов.Контрагент = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка))
	                |
	                |УПОРЯДОЧИТЬ ПО
	                |	Приоритет";  
	Запрос.УстановитьПараметр("Контрагент",Контрагент);
	Запрос.УстановитьПараметр("СтатьяДДС",СтатьяДДС);
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		Возврат Выборка.ПроцентОплаты;
	Иначе 	
	      Возврат 0;
	КонецЕсли;
	
	
КонецФункции // ()
