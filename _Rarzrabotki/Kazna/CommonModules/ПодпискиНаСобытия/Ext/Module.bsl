Функция ПолучитьЗначение(Источник, Поле)
	
	Если Источник=Неопределено Тогда
		Возврат Неопределено;
	КонецЕсли; 
	
	Если ТипЗнч(Источник)=Тип("Структура") И Не Источник.Свойство(Поле) Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	МетаданныеИсточника = Источник.Метаданные();
	Если МетаданныеИсточника.Реквизиты.Найти(Поле)=Неопределено Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	Возврат Источник[Поле];
	
КонецФункции

Процедура ПроверитьДокументОбработкаПроверкиЗаполнения(Источник, Отказ, ПроверяемыеРеквизиты) Экспорт
	
	МетаданныеОбъекта = Источник.Метаданные();
	//++ Павел Чистяков 10.10.2016 11:11:38 №312
	Если МетаданныеОбъекта.Реквизиты.Найти("Секция")<>Неопределено
		И МетаданныеОбъекта.Реквизиты.Найти("Подразделение")<>Неопределено Тогда
		Если Источник.Подразделение.ДетализацияДоСекций Тогда
			ПроверяемыеРеквизиты.Добавить("Секция");
		КонецЕсли; 
	КонецЕсли; 
	
КонецПроцедуры

Процедура ЗаполнитьВалютаДокументаОбработкаЗаполнения(Источник, ДанныеЗаполнения, СтандартнаяОбработка) Экспорт
	
	МетаданныеОбъекта = Источник.Метаданные();
	Если МетаданныеОбъекта.Реквизиты.Найти("ВалютаДокумента")<>Неопределено Тогда
		Источник.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить();
	КонецЕсли;
	
	Если МетаданныеОбъекта.Реквизиты.Найти("Секция")<>Неопределено
		И Не ЗначениеЗаполнено(Источник.Секция) Тогда
		Источник.Секция = ПолучитьЗначение(ДанныеЗаполнения, "Секция");
		Если Не ЗначениеЗаполнено(Источник.Секция) Тогда
			ДокументОснование = ПолучитьЗначение(ДанныеЗаполнения, "ДокументОснование");
			Источник.Секция = ПолучитьЗначение(ДокументОснование, "Секция");
		КонецЕсли; 
	КонецЕсли;	
	
КонецПроцедуры

Процедура ПроверкаКорректностиСтатьиДДСПередЗаписью(Источник, Отказ, РежимЗаписи, РежимПроведения) Экспорт
	
	Если Источник.ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если Источник.дата<Дата(2016,08,01) Тогда
		Возврат;
	КонецЕсли;
	
	Если РежимЗаписи=РежимЗаписиДокумента.ОтменаПроведения Тогда
		Возврат;
	КонецЕсли;
	
	//Сава 2016/08 Разрешим отклонить и черновик
	Если 	Источник.Виза_Состояние.Пустая() 
		ИЛИ Источник.Виза_Состояние = Перечисления.Визы_Состояния.Черновик
		ИЛИ Источник.Виза_Состояние = Перечисления.Визы_Состояния.Анулировано
		ИЛИ Источник.Виза_Состояние = Перечисления.Визы_Состояния.Отклонено тогда 
		Возврат;
	КонецЕсли;
	
	ГруппаСтарыеСтатьи = Константы.АХ_ГруппаСтатейДДСДо20160801.Получить();
	Если ЗначениеЗаполнено(ГруппаСтарыеСтатьи) Тогда
		Если Источник.СтатьяДвиженияДенежныхСредств.ПринадлежитЭлементу(ГруппаСтарыеСтатьи) Тогда
			Отказ = Истина;
			ОбщегоНазначенияКлиентСервер.СообщитьПользователю("Выбрана некорректная статья ДДС", Источник,,,Отказ);
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

Процедура ид_УстановкаПрефиксаДокументовПриУстановкеНовогоНомера(Источник, СтандартнаяОбработка, Префикс) Экспорт
	// Вставить содержимое обработчика.
	Префикс="N";
КонецПроцедуры

Процедура АХ_ОтменаРегистрацииППИПередЗаписью(Источник, Отказ, РежимЗаписи, РежимПроведения) Экспорт
	// Вставить содержимое обработчика.
	Если Источник.НеОтправлятьВБухгалтерию Тогда
		Источник.ОбменДанными.Получатели.Очистить();
	КонецЕсли;
КонецПроцедуры

Процедура ИД_ПриУстановкеПрефиксаППИПриУстановкеНовогоНомера(Источник, СтандартнаяОбработка, Префикс) Экспорт
	// Вставить содержимое обработчика.
	Префикс="000";
КонецПроцедуры

Процедура ИД_ДозаполнитьРеквизитыБанкДокументовПередЗаписью(Источник, Отказ, РежимЗаписи, РежимПроведения) Экспорт
	// Вставить содержимое обработчика.
	Если Не ЗначениеЗаполнено(Источник.Подразделение) Тогда
		Источник.Подразделение=  ПараметрыСеанса.ТекущийПользователь.Подразделение;
	КонецЕсли;
	Если Не ЗначениеЗаполнено(Источник.ВидОперации) Тогда
		Если ТипЗнч(Источник)=Тип("ДокументОбъект.ПлатежноеПоручениеВходящее") Тогда
			Источник.ВидОперации=Перечисления.ВидыОперацийПоступлениеБезналичныхДенежныхСредств.ОплатаПокупателя;
		ИначеЕсли ТипЗнч(Источник)=Тип("ДокументОбъект.ПлатежноеПоручениеИсходящее") Тогда	
			Источник.ВидОперации=Перечисления.ВидыОперацийППИсходящее.ОплатаПоставщику;			
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры

Процедура ПроверкаЗаполненностиНаправленияПередЗаписью(Источник, Отказ, РежимЗаписи, РежимПроведения) Экспорт
	
	Если РежимЗаписи=РежимЗаписиДокумента.Проведение Тогда
	Иначе	
		Возврат;
	КонецЕсли;
	
	Если Источник.ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если Источник.Дата<Дата(2022,07,01) Тогда
		Возврат;
	КонецЕсли;
	
	Если ТипЗнч(Источник)=Тип("ДокументОбъект.СчетНаОплатуПоставщика")  ИЛИ 
		ТипЗнч(Источник)=Тип("ДокументОбъект.ПлатежноеПоручениеВходящее")  ИЛИ
		ТипЗнч(Источник)=Тип("ДокументОбъект.ПриходныйКассовыйОрдер")		Тогда
		Если НЕ ЗначениеЗаполнено(Источник.Направление) Тогда
			Отказ= Истина ;
		КонецЕсли;
		
	ИначеЕсли ТипЗнч(Источник)=Тип("ДокументОбъект.РасходныйКассовыйОрдер")  ИЛИ ТипЗнч(Источник)=Тип("ДокументОбъект.ПлатежноеПоручениеИсходящее")  Тогда
		Если ЗначениеЗаполнено(Источник.ДокументОснование)  Тогда 
			Попытка
				Если ЗначениеЗаполнено(Источник.ДокументОснование.СчетНаОплатуПоставщика) Тогда
					Если  ЗначениеЗаполнено(Источник.ДокументОснование.СчетНаОплатуПоставщика.Направление) Тогда
					Иначе
						Если НЕ ЗначениеЗаполнено(Источник.Направление) Тогда
							Отказ= Истина ;
						КонецЕсли;
						
					КонецЕсли;
				Иначе	
					Если НЕ ЗначениеЗаполнено(Источник.Направление) Тогда
						Отказ= Истина ;
					КонецЕсли;
				КонецЕсли;
			Исключение
			КонецПопытки;
		Иначе
			Если НЕ ЗначениеЗаполнено(Источник.Направление) Тогда
				Отказ= Истина ;
			КонецЕсли;
		КонецЕсли;
		
		Для каждого Стр Из Источник.Расшифровка Цикл
			Если НЕ ЗначениеЗаполнено(Стр.Направление) Тогда
				Отказ= Истина ;
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
	
	
КонецПроцедуры

Процедура ПроверкаЗаблокированностиКонтрагентаПередЗаписью(Источник, Отказ, РежимЗаписи, РежимПроведения) Экспорт
	Если РежимЗаписи=РежимЗаписиДокумента.ОтменаПроведения Тогда
		Возврат;
	КонецЕсли;
	
	Если Источник.ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	
	Если ТипЗнч(Источник)=Тип("ДокументОбъект.СчетНаОплатуПоставщика")  ИЛИ 
		ТипЗнч(Источник)=Тип("ДокументОбъект.ПлатежноеПоручениеИсходящее")  ТОгда
		Если Источник.КОнтрагент.ЗаблокированНалоговойИнспекцией Тогда
		     Отказ= Истина;
			// #Если КЛиент Тогда
			 	Сообщить("Контрагент заблокирован  налоговой инспекцией");
			 //#КонецЕсли
		КонецЕсли;
	КонецЕсли;
	

КонецПроцедуры
