Процедура ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(НаименованиеЭлемента) Тогда
		НаименованиеЭлемента = Строка(Наименование);
	КонецЕсли; 
	
	Наименование = НаименованиеЭлемента;
	Если ЗначениеЗаполнено(Родитель) Тогда
		Наименование = Наименование + " (" + Родитель + ")";
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриЗаписи(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли; 
	
	Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	Подразделения.Ссылка
	|ИЗ
	|	Справочник.Подразделения КАК Подразделения
	|ГДЕ
	|	Подразделения.Родитель = &Ссылка"
	);
	Запрос.УстановитьПараметр("Ссылка", Ссылка);
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		ОбъектЭлемента = Выборка.Ссылка.ПолучитьОбъект();
		ОбъектЭлемента.Записать();
	КонецЦикла;
	
КонецПроцедуры
