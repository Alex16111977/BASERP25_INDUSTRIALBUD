&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
		
	ВерсионированиеОбъектов.ПриСозданииНаСервере(ЭтотОбъект);
	УстановитьВидимость();
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	ПриОткрытииНаСервере();
КонецПроцедуры

&НаСервере
Процедура ПриОткрытииНаСервере()
	
	// Вставить содержимое обработчика.
	Если ЗначениеЗаполнено(Объект.ДокументОснование)
		И ТипЗнч(Объект.ДокументОснование) = Тип("ДокументСсылка.ЗаявкаНаРасходованиеДенежныхСредств") Тогда 
		Элементы.СтатьяДвиженияДенежныхСредств.Доступность=Ложь;
	КонецЕсли;
	ПодразделениеПриИзмененииНаСервере();
	
КонецПроцедуры

&НаКлиенте
Процедура ПодразделениеПриИзменении(Элемент)
	ПодразделениеПриИзмененииНаСервере();
КонецПроцедуры

&НаСервере
Процедура ПодразделениеПриИзмененииНаСервере()
	Справочники.Подразделения.ЗаполнитьСписокВыбора(Элементы.Подразделение);
	Справочники.Секции.ЗаполнитьСписокСекций(Элементы.Секция, Объект.Подразделение, Ложь);
	Справочники.Кассы.ЗаполнитьСписокВыбора(Элементы.Касса, Объект.Подразделение);
	Если Объект.ВидОперации=Перечисления.ВидыОперацийРКО.ПеремещениеДС Тогда
		Справочники.Кассы.ЗаполнитьСписокВыбора(Элементы.КассаПолучатель, Неопределено);
	КонецЕсли; 
КонецПроцедуры

&НаСервере
Процедура УстановитьВидимость()
	Элементы.КассаПолучатель.Видимость = (Объект.ВидОперации=ПредопределенноеЗначение("Перечисление.ВидыОперацийРКО.ПеремещениеДС"));
	Элементы.Контрагент.Видимость = Истина;
	Элементы.Контрагент.Доступность = Истина;
	Элементы.Контрагент.ТолькоПросмотр =Ложь;
КонецПроцедуры

&НаКлиенте
Процедура ВидОперацииПриИзменении(Элемент)
	УстановитьВидимость();
	ПодразделениеПриИзмененииНаСервере();
КонецПроцедуры

&НаКлиенте
Процедура КассаПолучательНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	ПоказатьВыборИзСписка(Новый ОписаниеОповещения("КассаПолучательНачалоВыбораПродолжить", ЭтаФорма),
		Элемент.СписокВыбора, Элемент, Элемент.СписокВыбора.НайтиПоЗначению(Объект.КассаПолучатель));
КонецПроцедуры

&НаКлиенте
Процедура КассаПолучательНачалоВыбораПродолжить(ВыбранныйЭлемент, ДополнительныеПараметры) Экспорт
	Объект.КассаПолучатель = ВыбранныйЭлемент.Значение;
КонецПроцедуры

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)
	ДатыЗапретаИзменения.ОбъектПриЧтенииНаСервере(ЭтаФорма, ТекущийОбъект);  
	Этаформа.ТолькоПросмотр = ДопМодуль.ПроверитьОтветственного(Объект.Ответственный);

КонецПроцедуры
