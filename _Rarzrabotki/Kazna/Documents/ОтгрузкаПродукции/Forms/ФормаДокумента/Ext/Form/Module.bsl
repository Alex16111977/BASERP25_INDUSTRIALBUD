
&НаКлиенте
Процедура СоставНоменклатураПриИзменении(Элемент)
	Элементы.Состав.ТекущиеДанные.Цена =  ПолучитьЦенуНаСервере(Элементы.Состав.ТекущиеДанные.Номенклатура) ;
	РасчетТЧСостав();
КонецПроцедуры

Функция ПолучитьЦенуНаСервере(Номенклатура) 
	Возврат РегистрыСведений.СтоимостьПродукции.ПолучитьЦену(Объект.Дата,Объект.ПодразделениеЗаказчик,Номенклатура);
КонецФункции // ()

&НаКлиенте
Процедура СоставКоличествоПриИзменении(Элемент)
РасчетТЧСостав()

КонецПроцедуры

&НаКлиенте
Процедура СоставЦенаПриИзменении(Элемент)
	РасчетТЧСостав()

КонецПроцедуры


&НаКлиенте
Процедура РасчетТЧСостав()
	Элементы.Состав.ТекущиеДанные.Сумма =Элементы.Состав.ТекущиеДанные.Количество *Элементы.Состав.ТекущиеДанные.Цена ;
КонецПроцедуры

Процедура УстановитьВидимостьЗаказчика()
	Если Объект.СтороннийЗаказчик Тогда
		Элементы.ПодразделениеЗаказчик.Видимость=Ложь;
		Элементы.КонтрагентЗаказчик.Видимость=Истина;
		Элементы.НаправлениеРасхода.Видимость=Ложь;
	Иначе	
	    Элементы.ПодразделениеЗаказчик.Видимость=Истина;
		Элементы.КонтрагентЗаказчик.Видимость=Ложь;
		Элементы.НаправлениеРасхода.Видимость=Истина;
	КонецЕсли;
	

КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	УстановитьВидимостьЗаказчика();
КонецПроцедуры

&НаКлиенте
Процедура СтороннийЗаказчикПриИзменении(Элемент)
	УстановитьВидимостьЗаказчика();
КонецПроцедуры

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)
	ДатыЗапретаИзменения.ОбъектПриЧтенииНаСервере(ЭтаФорма, ТекущийОбъект);

КонецПроцедуры
