
Процедура ОбработкаПроведения(Отказ, Режим)
	//{{__КОНСТРУКТОР_ДВИЖЕНИЙ_РЕГИСТРОВ
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!
	
	// регистр ДанныеТабелирования 
	Движения.ДанныеТабелирования.Записывать = Истина;
	Для Каждого ТекСтрокаОтработанноеВремя Из ОтработанноеВремя Цикл
		Для СчКолонок=1 По 31 Цикл
			ТекДата=НачалоМесяца(НачДата)+ СчКолонок*60*60*24-1;
			КвоЧасов =СокрЛП(ВРЕГ(ТекСтрокаОтработанноеВремя["ПервыйЧасов"+СчКолонок]));
			КвоЧасовФакт=0;
			локСостояние = "";
			Если КвоЧасов="В" Тогда
				локСостояние="В";
			ИНАЧЕЕсли КвоЧасов="Б" Тогда
				локСостояние="Б";
			ИНАЧЕЕсли КвоЧасов="Н" Тогда
				локСостояние="Н";
			Иначе 
				Если ЗначениеЗаполнено(КвоЧасов) Тогда
					локСостояние="Р";
					Попытка
						КвоЧасовФакт=Число(КвоЧасов);
					Исключение
						КвоЧасовФакт=0;
					КонецПопытки;
				Иначе	
					 локСостояние="";
				 КонецЕсли;
			 КонецЕсли;
			 
			 КвоЧасовПлан=  ТекСтрокаОтработанноеВремя["ВторойЧасов"+СчКолонок];
			 Если ЗначениеЗаполнено(локСостояние) ИЛИ  КвоЧасовПлан>0 Тогда
				 Движение = Движения.ДанныеТабелирования.Добавить();
				 Движение.Период = ТекДата;
				 // Движение.ДатаТабеля = ТекДата;    ЧетвертыйВидВремени1
				 
				 локПодразделение=  ТекСтрокаОтработанноеВремя["ЧетвертыйВидВремени"+СчКолонок].Подразделение;
				 Если ЗначениеЗаполнено(локПодразделение) И ТекДата>=Дата(2022,10,01) Тогда
				 	Движение.Подразделение = локПодразделение;
				Иначе	
				    Движение.Подразделение = Подразделение;
				 КонецЕсли;
				 
				 Движение.Бригада =БригадаСпр;
				 Движение.Сотрудник =ТекСтрокаОтработанноеВремя.СотрудникСпр;
				 Движение.ЧасыФакт=КвоЧасовФакт;
				 Движение.ЧасыПлан=КвоЧасовПлан;
				 Движение.Состояние= локСостояние;
				 Движение.Организация= Организация;
				 Движение.Направление= Направление;
				 Движение.Оборудование= ТекСтрокаОтработанноеВремя["ЧетвертыйВидВремени"+СчКолонок];
			 КонецЕсли;
		 КонецЦикла;
	 КонецЦикла;
	 
	//}}__КОНСТРУКТОР_ДВИЖЕНИЙ_РЕГИСТРОВ
КонецПроцедуры
